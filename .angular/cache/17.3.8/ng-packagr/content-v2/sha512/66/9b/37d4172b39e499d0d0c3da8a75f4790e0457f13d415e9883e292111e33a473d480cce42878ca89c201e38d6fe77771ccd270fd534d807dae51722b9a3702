{"modules":[{"ast":{"type":"Program","start":0,"end":13109,"body":[{"type":"ExportNamedDeclaration","start":0,"end":2928,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":7,"end":2928,"id":{"type":"Identifier","start":13,"end":22,"name":"NgxSerial"},"superClass":null,"body":{"type":"ClassBody","start":23,"end":2928,"body":[{"type":"PropertyDefinition","start":29,"end":34,"static":false,"computed":false,"key":{"type":"Identifier","start":29,"end":33,"name":"port"},"value":null},{"type":"PropertyDefinition","start":39,"end":135,"static":false,"computed":false,"key":{"type":"Identifier","start":39,"end":46,"name":"options"},"value":{"type":"ObjectExpression","start":49,"end":134,"properties":[{"type":"Property","start":51,"end":65,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":51,"end":59,"name":"baudRate"},"value":{"type":"Literal","start":61,"end":65,"raw":"9600","value":9600},"kind":"init"},{"type":"Property","start":67,"end":78,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":67,"end":75,"name":"dataBits"},"value":{"type":"Literal","start":77,"end":78,"raw":"8","value":8},"kind":"init"},{"type":"Property","start":80,"end":94,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":80,"end":86,"name":"parity"},"value":{"type":"Literal","start":88,"end":94,"value":"none","raw":"'none'"},"kind":"init"},{"type":"Property","start":96,"end":111,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":96,"end":106,"name":"bufferSize"},"value":{"type":"Literal","start":108,"end":111,"raw":"256","value":256},"kind":"init"},{"type":"Property","start":113,"end":132,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":113,"end":124,"name":"flowControl"},"value":{"type":"Literal","start":126,"end":132,"value":"none","raw":"'none'"},"kind":"init"}]}},{"type":"PropertyDefinition","start":150,"end":157,"static":false,"computed":false,"key":{"type":"Identifier","start":150,"end":156,"name":"writer"},"value":null},{"type":"PropertyDefinition","start":162,"end":175,"static":false,"computed":false,"key":{"type":"Identifier","start":162,"end":174,"name":"readFunction"},"value":null},{"type":"PropertyDefinition","start":180,"end":204,"static":false,"computed":false,"key":{"type":"Identifier","start":180,"end":196,"name":"controlCharacter"},"value":{"type":"Literal","start":199,"end":203,"value":"\n","raw":"\"\\n\""}},{"type":"PropertyDefinition","start":209,"end":216,"static":false,"computed":false,"key":{"type":"Identifier","start":209,"end":215,"name":"reader"},"value":null},{"type":"PropertyDefinition","start":221,"end":242,"static":false,"computed":false,"key":{"type":"Identifier","start":221,"end":241,"name":"readableStreamClosed"},"value":null},{"type":"PropertyDefinition","start":247,"end":268,"static":false,"computed":false,"key":{"type":"Identifier","start":247,"end":267,"name":"writableStreamClosed"},"value":null},{"type":"PropertyDefinition","start":273,"end":292,"static":false,"computed":false,"key":{"type":"Identifier","start":273,"end":284,"name":"keepReading"},"value":{"type":"Literal","start":287,"end":291,"value":true,"raw":"true"}},{"type":"MethodDefinition","start":297,"end":540,"static":false,"computed":false,"key":{"type":"Identifier","start":297,"end":308,"name":"constructor"},"value":{"type":"FunctionExpression","start":308,"end":540,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":309,"end":321,"name":"readFunction"},{"type":"Identifier","start":323,"end":330,"name":"options"},{"type":"Identifier","start":332,"end":348,"name":"controlCharacter"}],"body":{"type":"BlockStatement","start":350,"end":540,"body":[{"type":"ExpressionStatement","start":360,"end":393,"expression":{"type":"AssignmentExpression","start":360,"end":392,"operator":"=","left":{"type":"MemberExpression","start":360,"end":377,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":360,"end":364},"property":{"type":"Identifier","start":365,"end":377,"name":"readFunction"}},"right":{"type":"Identifier","start":380,"end":392,"name":"readFunction"}}},{"type":"IfStatement","start":402,"end":450,"test":{"type":"Identifier","start":406,"end":413,"name":"options"},"consequent":{"type":"ExpressionStatement","start":427,"end":450,"expression":{"type":"AssignmentExpression","start":427,"end":449,"operator":"=","left":{"type":"MemberExpression","start":427,"end":439,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":427,"end":431},"property":{"type":"Identifier","start":432,"end":439,"name":"options"}},"right":{"type":"Identifier","start":442,"end":449,"name":"options"}}},"alternate":null},{"type":"IfStatement","start":459,"end":534,"test":{"type":"Identifier","start":463,"end":479,"name":"controlCharacter"},"consequent":{"type":"ExpressionStatement","start":493,"end":534,"expression":{"type":"AssignmentExpression","start":493,"end":533,"operator":"=","left":{"type":"MemberExpression","start":493,"end":514,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":493,"end":497},"property":{"type":"Identifier","start":498,"end":514,"name":"controlCharacter"}},"right":{"type":"Identifier","start":517,"end":533,"name":"controlCharacter"}}},"alternate":null}]},"expression":false},"kind":"constructor"},{"type":"MethodDefinition","start":545,"end":612,"static":false,"computed":false,"key":{"type":"Identifier","start":551,"end":559,"name":"sendData"},"value":{"type":"FunctionExpression","start":559,"end":612,"async":true,"generator":false,"id":null,"params":[{"type":"Identifier","start":560,"end":564,"name":"data"}],"body":{"type":"BlockStatement","start":566,"end":612,"body":[{"type":"ExpressionStatement","start":576,"end":606,"expression":{"type":"AwaitExpression","start":576,"end":605,"argument":{"type":"CallExpression","start":582,"end":605,"optional":false,"callee":{"type":"MemberExpression","start":582,"end":599,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":582,"end":593,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":582,"end":586},"property":{"type":"Identifier","start":587,"end":593,"name":"writer"}},"property":{"type":"Identifier","start":594,"end":599,"name":"write"}},"arguments":[{"type":"Identifier","start":600,"end":604,"name":"data"}]}}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":617,"end":1567,"static":false,"computed":false,"key":{"type":"Identifier","start":623,"end":631,"name":"readLoop"},"value":{"type":"FunctionExpression","start":631,"end":1567,"async":true,"generator":false,"id":null,"params":[],"body":{"type":"BlockStatement","start":634,"end":1567,"body":[{"type":"WhileStatement","start":644,"end":1561,"test":{"type":"LogicalExpression","start":651,"end":689,"operator":"&&","left":{"type":"MemberExpression","start":651,"end":669,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":651,"end":660,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":651,"end":655},"property":{"type":"Identifier","start":656,"end":660,"name":"port"}},"property":{"type":"Identifier","start":661,"end":669,"name":"readable"}},"right":{"type":"MemberExpression","start":673,"end":689,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":673,"end":677},"property":{"type":"Identifier","start":678,"end":689,"name":"keepReading"}}},"body":{"type":"BlockStatement","start":691,"end":1561,"body":[{"type":"VariableDeclaration","start":705,"end":749,"kind":"const","declarations":[{"type":"VariableDeclarator","start":711,"end":748,"id":{"type":"Identifier","start":711,"end":722,"name":"textDecoder"},"init":{"type":"NewExpression","start":725,"end":748,"callee":{"type":"Identifier","start":729,"end":746,"name":"TextDecoderStream"},"arguments":[]}}]},{"type":"ExpressionStatement","start":821,"end":897,"expression":{"type":"AssignmentExpression","start":821,"end":896,"operator":"=","left":{"type":"MemberExpression","start":821,"end":846,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":821,"end":825},"property":{"type":"Identifier","start":826,"end":846,"name":"readableStreamClosed"}},"right":{"type":"CallExpression","start":849,"end":896,"optional":false,"callee":{"type":"MemberExpression","start":849,"end":874,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":849,"end":867,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":849,"end":858,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":849,"end":853},"property":{"type":"Identifier","start":854,"end":858,"name":"port"}},"property":{"type":"Identifier","start":859,"end":867,"name":"readable"}},"property":{"type":"Identifier","start":868,"end":874,"name":"pipeTo"}},"arguments":[{"type":"MemberExpression","start":875,"end":895,"computed":false,"optional":false,"object":{"type":"Identifier","start":875,"end":886,"name":"textDecoder"},"property":{"type":"Identifier","start":887,"end":895,"name":"writable"}}]}}},{"type":"ExpressionStatement","start":910,"end":1073,"expression":{"type":"AssignmentExpression","start":910,"end":1072,"operator":"=","left":{"type":"MemberExpression","start":910,"end":921,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":910,"end":914},"property":{"type":"Identifier","start":915,"end":921,"name":"reader"}},"right":{"type":"CallExpression","start":924,"end":1072,"optional":false,"callee":{"type":"MemberExpression","start":924,"end":1070,"computed":false,"optional":false,"object":{"type":"CallExpression","start":924,"end":1043,"optional":false,"callee":{"type":"MemberExpression","start":924,"end":973,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":924,"end":944,"computed":false,"optional":false,"object":{"type":"Identifier","start":924,"end":935,"name":"textDecoder"},"property":{"type":"Identifier","start":936,"end":944,"name":"readable"}},"property":{"type":"Identifier","start":962,"end":973,"name":"pipeThrough"}},"arguments":[{"type":"NewExpression","start":974,"end":1042,"callee":{"type":"Identifier","start":978,"end":993,"name":"TransformStream"},"arguments":[{"type":"NewExpression","start":994,"end":1041,"callee":{"type":"Identifier","start":998,"end":1018,"name":"LineBreakTransformer"},"arguments":[{"type":"MemberExpression","start":1019,"end":1040,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1019,"end":1023},"property":{"type":"Identifier","start":1024,"end":1040,"name":"controlCharacter"}}]}]}]},"property":{"type":"Identifier","start":1061,"end":1070,"name":"getReader"}},"arguments":[]}}},{"type":"TryStatement","start":1086,"end":1551,"block":{"type":"BlockStatement","start":1090,"end":1414,"body":[{"type":"WhileStatement","start":1108,"end":1400,"test":{"type":"Literal","start":1115,"end":1119,"value":true,"raw":"true"},"body":{"type":"BlockStatement","start":1121,"end":1400,"body":[{"type":"VariableDeclaration","start":1143,"end":1192,"kind":"const","declarations":[{"type":"VariableDeclarator","start":1149,"end":1191,"id":{"type":"ObjectPattern","start":1149,"end":1164,"properties":[{"type":"Property","start":1151,"end":1156,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1151,"end":1156,"name":"value"},"value":{"type":"Identifier","start":1151,"end":1156,"name":"value"},"kind":"init"},{"type":"Property","start":1158,"end":1162,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1158,"end":1162,"name":"done"},"value":{"type":"Identifier","start":1158,"end":1162,"name":"done"},"kind":"init"}]},"init":{"type":"AwaitExpression","start":1167,"end":1191,"argument":{"type":"CallExpression","start":1173,"end":1191,"optional":false,"callee":{"type":"MemberExpression","start":1173,"end":1189,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1173,"end":1184,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1173,"end":1177},"property":{"type":"Identifier","start":1178,"end":1184,"name":"reader"}},"property":{"type":"Identifier","start":1185,"end":1189,"name":"read"}},"arguments":[]}}}]},{"type":"IfStatement","start":1213,"end":1277,"test":{"type":"Identifier","start":1217,"end":1221,"name":"done"},"consequent":{"type":"BlockStatement","start":1223,"end":1277,"body":[{"type":"BreakStatement","start":1249,"end":1255,"label":null}]},"alternate":null},{"type":"IfStatement","start":1298,"end":1382,"test":{"type":"Identifier","start":1302,"end":1307,"name":"value"},"consequent":{"type":"BlockStatement","start":1309,"end":1382,"body":[{"type":"ExpressionStatement","start":1335,"end":1360,"expression":{"type":"CallExpression","start":1335,"end":1359,"optional":false,"callee":{"type":"MemberExpression","start":1335,"end":1352,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1335,"end":1339},"property":{"type":"Identifier","start":1340,"end":1352,"name":"readFunction"}},"arguments":[{"type":"Identifier","start":1353,"end":1358,"name":"value"}]}}]},"alternate":null}]}}]},"handler":{"type":"CatchClause","start":1427,"end":1551,"param":{"type":"Identifier","start":1434,"end":1439,"name":"error"},"body":{"type":"BlockStatement","start":1441,"end":1551,"body":[{"type":"ExpressionStatement","start":1459,"end":1537,"expression":{"type":"CallExpression","start":1459,"end":1536,"optional":false,"callee":{"type":"MemberExpression","start":1459,"end":1472,"computed":false,"optional":false,"object":{"type":"Identifier","start":1459,"end":1466,"name":"console"},"property":{"type":"Identifier","start":1467,"end":1472,"name":"error"}},"arguments":[{"type":"Literal","start":1473,"end":1535,"value":"Read Loop error. Have the serial device been disconnected ? ","raw":"\"Read Loop error. Have the serial device been disconnected ? \""}]}}]}},"finalizer":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":1572,"end":1850,"static":false,"computed":false,"key":{"type":"Identifier","start":1578,"end":1583,"name":"close"},"value":{"type":"FunctionExpression","start":1583,"end":1850,"async":true,"generator":false,"id":null,"params":[{"type":"Identifier","start":1584,"end":1592,"name":"callback"}],"body":{"type":"BlockStatement","start":1594,"end":1850,"body":[{"type":"ExpressionStatement","start":1604,"end":1629,"expression":{"type":"AssignmentExpression","start":1604,"end":1628,"operator":"=","left":{"type":"MemberExpression","start":1604,"end":1620,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1604,"end":1608},"property":{"type":"Identifier","start":1609,"end":1620,"name":"keepReading"}},"right":{"type":"Literal","start":1623,"end":1628,"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":1638,"end":1659,"expression":{"type":"CallExpression","start":1638,"end":1658,"optional":false,"callee":{"type":"MemberExpression","start":1638,"end":1656,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1638,"end":1649,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1638,"end":1642},"property":{"type":"Identifier","start":1643,"end":1649,"name":"reader"}},"property":{"type":"Identifier","start":1650,"end":1656,"name":"cancel"}},"arguments":[]}},{"type":"ExpressionStatement","start":1668,"end":1717,"expression":{"type":"AwaitExpression","start":1668,"end":1716,"argument":{"type":"CallExpression","start":1674,"end":1716,"optional":false,"callee":{"type":"MemberExpression","start":1674,"end":1705,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1674,"end":1699,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1674,"end":1678},"property":{"type":"Identifier","start":1679,"end":1699,"name":"readableStreamClosed"}},"property":{"type":"Identifier","start":1700,"end":1705,"name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","start":1706,"end":1715,"async":false,"expression":false,"generator":false,"params":[],"body":{"type":"BlockStatement","start":1712,"end":1715,"body":[]},"id":null}]}}},{"type":"ExpressionStatement","start":1726,"end":1746,"expression":{"type":"CallExpression","start":1726,"end":1745,"optional":false,"callee":{"type":"MemberExpression","start":1726,"end":1743,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1726,"end":1737,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1726,"end":1730},"property":{"type":"Identifier","start":1731,"end":1737,"name":"writer"}},"property":{"type":"Identifier","start":1738,"end":1743,"name":"close"}},"arguments":[]}},{"type":"ExpressionStatement","start":1755,"end":1787,"expression":{"type":"AwaitExpression","start":1755,"end":1786,"argument":{"type":"MemberExpression","start":1761,"end":1786,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1761,"end":1765},"property":{"type":"Identifier","start":1766,"end":1786,"name":"writableStreamClosed"}}}},{"type":"ExpressionStatement","start":1796,"end":1820,"expression":{"type":"AwaitExpression","start":1796,"end":1819,"argument":{"type":"CallExpression","start":1802,"end":1819,"optional":false,"callee":{"type":"MemberExpression","start":1802,"end":1817,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1802,"end":1811,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1802,"end":1806},"property":{"type":"Identifier","start":1807,"end":1811,"name":"port"}},"property":{"type":"Identifier","start":1812,"end":1817,"name":"close"}},"arguments":[]}}},{"type":"ExpressionStatement","start":1829,"end":1844,"expression":{"type":"CallExpression","start":1829,"end":1843,"optional":false,"callee":{"type":"Identifier","start":1829,"end":1837,"name":"callback"},"arguments":[{"type":"Literal","start":1838,"end":1842,"raw":"null","value":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":1855,"end":2926,"static":false,"computed":false,"key":{"type":"Identifier","start":1861,"end":1868,"name":"connect"},"value":{"type":"FunctionExpression","start":1868,"end":2926,"async":true,"generator":false,"id":null,"params":[{"type":"Identifier","start":1869,"end":1877,"name":"callback"}],"body":{"type":"BlockStatement","start":1879,"end":2926,"body":[{"type":"ExpressionStatement","start":1889,"end":1913,"expression":{"type":"AssignmentExpression","start":1889,"end":1912,"operator":"=","left":{"type":"MemberExpression","start":1889,"end":1905,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1889,"end":1893},"property":{"type":"Identifier","start":1894,"end":1905,"name":"keepReading"}},"right":{"type":"Literal","start":1908,"end":1912,"value":true,"raw":"true"}}},{"type":"IfStatement","start":1922,"end":2920,"test":{"type":"BinaryExpression","start":1926,"end":1947,"operator":"in","left":{"type":"Literal","start":1926,"end":1934,"value":"serial","raw":"\"serial\""},"right":{"type":"Identifier","start":1938,"end":1947,"name":"navigator"}},"consequent":{"type":"BlockStatement","start":1949,"end":2816,"body":[{"type":"VariableDeclaration","start":2026,"end":2046,"kind":"let","declarations":[{"type":"VariableDeclarator","start":2030,"end":2045,"id":{"type":"Identifier","start":2030,"end":2033,"name":"nav"},"init":{"type":"Identifier","start":2036,"end":2045,"name":"navigator"}}]},{"type":"VariableDeclaration","start":2059,"end":2101,"kind":"const","declarations":[{"type":"VariableDeclarator","start":2065,"end":2100,"id":{"type":"Identifier","start":2065,"end":2070,"name":"ports"},"init":{"type":"AwaitExpression","start":2073,"end":2100,"argument":{"type":"CallExpression","start":2079,"end":2100,"optional":false,"callee":{"type":"MemberExpression","start":2079,"end":2098,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2079,"end":2089,"computed":false,"optional":false,"object":{"type":"Identifier","start":2079,"end":2082,"name":"nav"},"property":{"type":"Identifier","start":2083,"end":2089,"name":"serial"}},"property":{"type":"Identifier","start":2090,"end":2098,"name":"getPorts"}},"arguments":[]}}}]},{"type":"TryStatement","start":2114,"end":2325,"block":{"type":"BlockStatement","start":2118,"end":2193,"body":[{"type":"ExpressionStatement","start":2136,"end":2179,"expression":{"type":"AssignmentExpression","start":2136,"end":2178,"operator":"=","left":{"type":"MemberExpression","start":2136,"end":2145,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2136,"end":2140},"property":{"type":"Identifier","start":2141,"end":2145,"name":"port"}},"right":{"type":"AwaitExpression","start":2148,"end":2178,"argument":{"type":"CallExpression","start":2154,"end":2178,"optional":false,"callee":{"type":"MemberExpression","start":2154,"end":2176,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2154,"end":2164,"computed":false,"optional":false,"object":{"type":"Identifier","start":2154,"end":2157,"name":"nav"},"property":{"type":"Identifier","start":2158,"end":2164,"name":"serial"}},"property":{"type":"Identifier","start":2165,"end":2176,"name":"requestPort"}},"arguments":[]}}}}]},"handler":{"type":"CatchClause","start":2206,"end":2325,"param":{"type":"Identifier","start":2213,"end":2218,"name":"error"},"body":{"type":"BlockStatement","start":2220,"end":2325,"body":[{"type":"ExpressionStatement","start":2238,"end":2287,"expression":{"type":"CallExpression","start":2238,"end":2286,"optional":false,"callee":{"type":"MemberExpression","start":2238,"end":2251,"computed":false,"optional":false,"object":{"type":"Identifier","start":2238,"end":2245,"name":"console"},"property":{"type":"Identifier","start":2246,"end":2251,"name":"error"}},"arguments":[{"type":"BinaryExpression","start":2252,"end":2285,"operator":"+","left":{"type":"Literal","start":2252,"end":2277,"value":"Requesting port error: ","raw":"\"Requesting port error: \""},"right":{"type":"Identifier","start":2280,"end":2285,"name":"error"}}]}},{"type":"ReturnStatement","start":2304,"end":2311,"argument":null}]}},"finalizer":null},{"type":"TryStatement","start":2338,"end":2538,"block":{"type":"BlockStatement","start":2342,"end":2409,"body":[{"type":"ExpressionStatement","start":2360,"end":2395,"expression":{"type":"AwaitExpression","start":2360,"end":2394,"argument":{"type":"CallExpression","start":2366,"end":2394,"optional":false,"callee":{"type":"MemberExpression","start":2366,"end":2380,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2366,"end":2375,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2366,"end":2370},"property":{"type":"Identifier","start":2371,"end":2375,"name":"port"}},"property":{"type":"Identifier","start":2376,"end":2380,"name":"open"}},"arguments":[{"type":"MemberExpression","start":2381,"end":2393,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2381,"end":2385},"property":{"type":"Identifier","start":2386,"end":2393,"name":"options"}}]}}}]},"handler":{"type":"CatchClause","start":2422,"end":2538,"param":{"type":"Identifier","start":2429,"end":2434,"name":"error"},"body":{"type":"BlockStatement","start":2436,"end":2538,"body":[{"type":"ExpressionStatement","start":2454,"end":2500,"expression":{"type":"CallExpression","start":2454,"end":2499,"optional":false,"callee":{"type":"MemberExpression","start":2454,"end":2467,"computed":false,"optional":false,"object":{"type":"Identifier","start":2454,"end":2461,"name":"console"},"property":{"type":"Identifier","start":2462,"end":2467,"name":"error"}},"arguments":[{"type":"BinaryExpression","start":2468,"end":2498,"operator":"+","left":{"type":"Literal","start":2468,"end":2490,"value":"Opening port error: ","raw":"\"Opening port error: \""},"right":{"type":"Identifier","start":2493,"end":2498,"name":"error"}}]}},{"type":"ReturnStatement","start":2517,"end":2524,"argument":null}]}},"finalizer":null},{"type":"VariableDeclaration","start":2551,"end":2595,"kind":"const","declarations":[{"type":"VariableDeclarator","start":2557,"end":2594,"id":{"type":"Identifier","start":2557,"end":2568,"name":"textEncoder"},"init":{"type":"NewExpression","start":2571,"end":2594,"callee":{"type":"Identifier","start":2575,"end":2592,"name":"TextEncoderStream"},"arguments":[]}}]},{"type":"ExpressionStatement","start":2608,"end":2684,"expression":{"type":"AssignmentExpression","start":2608,"end":2683,"operator":"=","left":{"type":"MemberExpression","start":2608,"end":2633,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2608,"end":2612},"property":{"type":"Identifier","start":2613,"end":2633,"name":"writableStreamClosed"}},"right":{"type":"CallExpression","start":2636,"end":2683,"optional":false,"callee":{"type":"MemberExpression","start":2636,"end":2663,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2636,"end":2656,"computed":false,"optional":false,"object":{"type":"Identifier","start":2636,"end":2647,"name":"textEncoder"},"property":{"type":"Identifier","start":2648,"end":2656,"name":"readable"}},"property":{"type":"Identifier","start":2657,"end":2663,"name":"pipeTo"}},"arguments":[{"type":"MemberExpression","start":2664,"end":2682,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2664,"end":2673,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2664,"end":2668},"property":{"type":"Identifier","start":2669,"end":2673,"name":"port"}},"property":{"type":"Identifier","start":2674,"end":2682,"name":"writable"}}]}}},{"type":"ExpressionStatement","start":2697,"end":2744,"expression":{"type":"AssignmentExpression","start":2697,"end":2743,"operator":"=","left":{"type":"MemberExpression","start":2697,"end":2708,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2697,"end":2701},"property":{"type":"Identifier","start":2702,"end":2708,"name":"writer"}},"right":{"type":"CallExpression","start":2711,"end":2743,"optional":false,"callee":{"type":"MemberExpression","start":2711,"end":2741,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2711,"end":2731,"computed":false,"optional":false,"object":{"type":"Identifier","start":2711,"end":2722,"name":"textEncoder"},"property":{"type":"Identifier","start":2723,"end":2731,"name":"writable"}},"property":{"type":"Identifier","start":2732,"end":2741,"name":"getWriter"}},"arguments":[]}}},{"type":"ExpressionStatement","start":2757,"end":2773,"expression":{"type":"CallExpression","start":2757,"end":2772,"optional":false,"callee":{"type":"MemberExpression","start":2757,"end":2770,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2757,"end":2761},"property":{"type":"Identifier","start":2762,"end":2770,"name":"readLoop"}},"arguments":[]}},{"type":"ExpressionStatement","start":2786,"end":2806,"expression":{"type":"CallExpression","start":2786,"end":2805,"optional":false,"callee":{"type":"Identifier","start":2786,"end":2794,"name":"callback"},"arguments":[{"type":"MemberExpression","start":2795,"end":2804,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2795,"end":2799},"property":{"type":"Identifier","start":2800,"end":2804,"name":"port"}}]}}]},"alternate":{"type":"BlockStatement","start":2830,"end":2920,"body":[{"type":"ExpressionStatement","start":2844,"end":2910,"expression":{"type":"CallExpression","start":2844,"end":2909,"optional":false,"callee":{"type":"MemberExpression","start":2844,"end":2857,"computed":false,"optional":false,"object":{"type":"Identifier","start":2844,"end":2851,"name":"console"},"property":{"type":"Identifier","start":2852,"end":2857,"name":"error"}},"arguments":[{"type":"Literal","start":2858,"end":2908,"value":"This browser does NOT support the Web Serial API","raw":"\"This browser does NOT support the Web Serial API\""}]}}]}}]},"expression":false},"kind":"method"}]}}},{"type":"ClassDeclaration","start":2929,"end":3434,"id":{"type":"Identifier","start":2935,"end":2955,"name":"LineBreakTransformer"},"superClass":null,"body":{"type":"ClassBody","start":2956,"end":3434,"body":[{"type":"PropertyDefinition","start":2962,"end":2977,"static":false,"computed":false,"key":{"type":"Identifier","start":2962,"end":2971,"name":"container"},"value":{"type":"Literal","start":2974,"end":2976,"value":"","raw":"\"\""}},{"type":"PropertyDefinition","start":2982,"end":2999,"static":false,"computed":false,"key":{"type":"Identifier","start":2982,"end":2998,"name":"controlCharacter"},"value":null},{"type":"MethodDefinition","start":3004,"end":3120,"static":false,"computed":false,"key":{"type":"Identifier","start":3004,"end":3015,"name":"constructor"},"value":{"type":"FunctionExpression","start":3015,"end":3120,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":3016,"end":3032,"name":"controlCharacter"}],"body":{"type":"BlockStatement","start":3034,"end":3120,"body":[{"type":"ExpressionStatement","start":3044,"end":3064,"expression":{"type":"AssignmentExpression","start":3044,"end":3063,"operator":"=","left":{"type":"MemberExpression","start":3044,"end":3058,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3044,"end":3048},"property":{"type":"Identifier","start":3049,"end":3058,"name":"container"}},"right":{"type":"Literal","start":3061,"end":3063,"value":"","raw":"''"}}},{"type":"ExpressionStatement","start":3073,"end":3114,"expression":{"type":"AssignmentExpression","start":3073,"end":3113,"operator":"=","left":{"type":"MemberExpression","start":3073,"end":3094,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3073,"end":3077},"property":{"type":"Identifier","start":3078,"end":3094,"name":"controlCharacter"}},"right":{"type":"Identifier","start":3097,"end":3113,"name":"controlCharacter"}}}]},"expression":false},"kind":"constructor"},{"type":"MethodDefinition","start":3125,"end":3358,"static":false,"computed":false,"key":{"type":"Identifier","start":3125,"end":3134,"name":"transform"},"value":{"type":"FunctionExpression","start":3134,"end":3358,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":3135,"end":3140,"name":"chunk"},{"type":"Identifier","start":3142,"end":3152,"name":"controller"}],"body":{"type":"BlockStatement","start":3154,"end":3358,"body":[{"type":"ExpressionStatement","start":3164,"end":3188,"expression":{"type":"AssignmentExpression","start":3164,"end":3187,"operator":"+=","left":{"type":"MemberExpression","start":3164,"end":3178,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3164,"end":3168},"property":{"type":"Identifier","start":3169,"end":3178,"name":"container"}},"right":{"type":"Identifier","start":3182,"end":3187,"name":"chunk"}}},{"type":"VariableDeclaration","start":3197,"end":3255,"kind":"const","declarations":[{"type":"VariableDeclarator","start":3203,"end":3254,"id":{"type":"Identifier","start":3203,"end":3208,"name":"lines"},"init":{"type":"CallExpression","start":3211,"end":3254,"optional":false,"callee":{"type":"MemberExpression","start":3211,"end":3231,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":3211,"end":3225,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3211,"end":3215},"property":{"type":"Identifier","start":3216,"end":3225,"name":"container"}},"property":{"type":"Identifier","start":3226,"end":3231,"name":"split"}},"arguments":[{"type":"MemberExpression","start":3232,"end":3253,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3232,"end":3236},"property":{"type":"Identifier","start":3237,"end":3253,"name":"controlCharacter"}}]}}]},{"type":"ExpressionStatement","start":3264,"end":3293,"expression":{"type":"AssignmentExpression","start":3264,"end":3292,"operator":"=","left":{"type":"MemberExpression","start":3264,"end":3278,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3264,"end":3268},"property":{"type":"Identifier","start":3269,"end":3278,"name":"container"}},"right":{"type":"CallExpression","start":3281,"end":3292,"optional":false,"callee":{"type":"MemberExpression","start":3281,"end":3290,"computed":false,"optional":false,"object":{"type":"Identifier","start":3281,"end":3286,"name":"lines"},"property":{"type":"Identifier","start":3287,"end":3290,"name":"pop"}},"arguments":[]}}},{"type":"ExpressionStatement","start":3302,"end":3352,"expression":{"type":"CallExpression","start":3302,"end":3351,"optional":false,"callee":{"type":"MemberExpression","start":3302,"end":3315,"computed":false,"optional":false,"object":{"type":"Identifier","start":3302,"end":3307,"name":"lines"},"property":{"type":"Identifier","start":3308,"end":3315,"name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","start":3316,"end":3350,"async":false,"expression":true,"generator":false,"params":[{"type":"Identifier","start":3317,"end":3321,"name":"line"}],"body":{"type":"CallExpression","start":3326,"end":3350,"optional":false,"callee":{"type":"MemberExpression","start":3326,"end":3344,"computed":false,"optional":false,"object":{"type":"Identifier","start":3326,"end":3336,"name":"controller"},"property":{"type":"Identifier","start":3337,"end":3344,"name":"enqueue"}},"arguments":[{"type":"Identifier","start":3345,"end":3349,"name":"line"}]},"id":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":3363,"end":3432,"static":false,"computed":false,"key":{"type":"Identifier","start":3363,"end":3368,"name":"flush"},"value":{"type":"FunctionExpression","start":3368,"end":3432,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":3369,"end":3379,"name":"controller"}],"body":{"type":"BlockStatement","start":3381,"end":3432,"body":[{"type":"ExpressionStatement","start":3391,"end":3426,"expression":{"type":"CallExpression","start":3391,"end":3425,"optional":false,"callee":{"type":"MemberExpression","start":3391,"end":3409,"computed":false,"optional":false,"object":{"type":"Identifier","start":3391,"end":3401,"name":"controller"},"property":{"type":"Identifier","start":3402,"end":3409,"name":"enqueue"}},"arguments":[{"type":"MemberExpression","start":3410,"end":3424,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3410,"end":3414},"property":{"type":"Identifier","start":3415,"end":3424,"name":"container"}}]}}]},"expression":false},"kind":"method"}]}}],"_rollupRemoved":[{"end":13109,"start":3435,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"export class NgxSerial {\n    port;\n    options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default\n    writer;\n    readFunction;\n    controlCharacter = \"\\n\";\n    reader;\n    readableStreamClosed;\n    writableStreamClosed;\n    keepReading = true;\n    constructor(readFunction, options, controlCharacter) {\n        this.readFunction = readFunction;\n        if (options)\n            this.options = options;\n        if (controlCharacter)\n            this.controlCharacter = controlCharacter;\n    }\n    async sendData(data) {\n        await this.writer.write(data);\n    }\n    async readLoop() {\n        while (this.port.readable && this.keepReading) {\n            const textDecoder = new TextDecoderStream();\n            //const readableStream = new ReadableStream();\n            this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);\n            this.reader = textDecoder.readable\n                .pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))\n                .getReader();\n            try {\n                while (true) {\n                    const { value, done } = await this.reader.read();\n                    if (done) {\n                        break;\n                    }\n                    if (value) {\n                        this.readFunction(value);\n                    }\n                }\n            }\n            catch (error) {\n                console.error(\"Read Loop error. Have the serial device been disconnected ? \");\n            }\n        }\n    }\n    async close(callback) {\n        this.keepReading = false;\n        this.reader.cancel();\n        await this.readableStreamClosed.catch(() => { });\n        this.writer.close();\n        await this.writableStreamClosed;\n        await this.port.close();\n        callback(null);\n    }\n    async connect(callback) {\n        this.keepReading = true;\n        if (\"serial\" in navigator) {\n            // The Web Serial API is supported by the browser.\n            let nav = navigator;\n            const ports = await nav.serial.getPorts();\n            try {\n                this.port = await nav.serial.requestPort();\n            }\n            catch (error) {\n                console.error(\"Requesting port error: \" + error);\n                return;\n            }\n            try {\n                await this.port.open(this.options);\n            }\n            catch (error) {\n                console.error(\"Opening port error: \" + error);\n                return;\n            }\n            const textEncoder = new TextEncoderStream();\n            this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);\n            this.writer = textEncoder.writable.getWriter();\n            this.readLoop();\n            callback(this.port);\n        }\n        else {\n            console.error(\"This browser does NOT support the Web Serial API\");\n        }\n    }\n}\nclass LineBreakTransformer {\n    container = \"\";\n    controlCharacter;\n    constructor(controlCharacter) {\n        this.container = '';\n        this.controlCharacter = controlCharacter;\n    }\n    transform(chunk, controller) {\n        this.container += chunk;\n        const lines = this.container.split(this.controlCharacter);\n        this.container = lines.pop();\n        lines.forEach((line) => controller.enqueue(line));\n    }\n    flush(controller) {\n        controller.enqueue(this.container);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL2xpYi9uZ3gtc2VyaWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxTQUFTO0lBRVYsSUFBSSxDQUFNO0lBQ1YsT0FBTyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxTQUFTO0lBQzFHLE1BQU0sQ0FBTTtJQUNaLFlBQVksQ0FBVztJQUN2QixnQkFBZ0IsR0FBVyxJQUFJLENBQUM7SUFDaEMsTUFBTSxDQUFLO0lBQ1gsb0JBQW9CLENBQUs7SUFDekIsb0JBQW9CLENBQUs7SUFDekIsV0FBVyxHQUFXLElBQUksQ0FBQztJQUVuQyxZQUFZLFlBQXNCLEVBQUUsT0FBYSxFQUFFLGdCQUFzQjtRQUN2RSxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLE9BQU87WUFDVCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixJQUFJLGdCQUFnQjtZQUNsQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7SUFFN0MsQ0FBQztJQUNNLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUNoQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBUTtRQUdwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUcsQ0FBQztZQUMvQyxNQUFNLFdBQVcsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDNUMsOENBQThDO1lBQzlDLElBQUksQ0FBQyxv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Q0FBQzthQUFNLENBQUM7WUFDTixPQUFPLENBQUMsS0FBSyxDQUFDLGtEQUFrRCxDQUFDLENBQUM7UUFDcEUsQ0FBQztJQUVILENBQUM7Q0FDRjtBQUVELE1BQU0sb0JBQW9CO0lBQ3hCLFNBQVMsR0FBTSxFQUFFLENBQUM7SUFDVixnQkFBZ0IsQ0FBUztJQUVqQyxZQUFZLGdCQUF3QjtRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUE7SUFDMUMsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFTLEVBQUUsVUFBYztRQUNqQyxJQUFJLENBQUMsU0FBUyxJQUFJLEtBQUssQ0FBQztRQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELEtBQUssQ0FBQyxVQUFjO1FBQ2xCLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5PTkVfVFlQRSB9IGZyb20gXCJAYW5ndWxhci9jb21waWxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5neFNlcmlhbCB7XHJcblxyXG4gICAgcHJpdmF0ZSBwb3J0OiBhbnk7XHJcbiAgICBwcml2YXRlIG9wdGlvbnMgPSB7IGJhdWRSYXRlOiA5NjAwLCBkYXRhQml0czogOCwgcGFyaXR5OiAnbm9uZScsIGJ1ZmZlclNpemU6IDI1NiwgZmxvd0NvbnRyb2w6ICdub25lJyB9OyAvL0RlZmF1bHRcclxuICAgIHByaXZhdGUgd3JpdGVyOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRGdW5jdGlvbjogRnVuY3Rpb247XHJcbiAgICBwcml2YXRlIGNvbnRyb2xDaGFyYWN0ZXI6IHN0cmluZyA9IFwiXFxuXCI7XHJcbiAgICBwcml2YXRlIHJlYWRlcjphbnk7XHJcbiAgICBwcml2YXRlIHJlYWRhYmxlU3RyZWFtQ2xvc2VkOmFueTtcclxuICAgIHByaXZhdGUgd3JpdGFibGVTdHJlYW1DbG9zZWQ6YW55O1xyXG4gICAgcHJpdmF0ZSBrZWVwUmVhZGluZzpib29sZWFuID0gdHJ1ZTtcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRGdW5jdGlvbjogRnVuY3Rpb24sIG9wdGlvbnM/OiBhbnksIGNvbnRyb2xDaGFyYWN0ZXI/OiBhbnkpIHtcclxuICAgICAgdGhpcy5yZWFkRnVuY3Rpb24gPSByZWFkRnVuY3Rpb247XHJcbiAgICAgIGlmIChvcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgIGlmIChjb250cm9sQ2hhcmFjdGVyKVxyXG4gICAgICAgIHRoaXMuY29udHJvbENoYXJhY3RlciA9IGNvbnRyb2xDaGFyYWN0ZXI7XHJcbiAgXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2VuZERhdGEoZGF0YTogc3RyaW5nKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKGRhdGEpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWFkTG9vcCgpIHtcclxuICAgICAgXHJcbiAgXHJcbiAgICAgIHdoaWxlICh0aGlzLnBvcnQucmVhZGFibGUgJiYgdGhpcy5rZWVwUmVhZGluZyApIHtcclxuICAgICAgICBjb25zdCB0ZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpO1xyXG4gICAgICAgIC8vY29uc3QgcmVhZGFibGVTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oKTtcclxuICAgICAgICB0aGlzLnJlYWRhYmxlU3RyZWFtQ2xvc2VkID0gdGhpcy5wb3J0LnJlYWRhYmxlLnBpcGVUbyh0ZXh0RGVjb2Rlci53cml0YWJsZSk7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIgPSB0ZXh0RGVjb2Rlci5yZWFkYWJsZVxyXG4gICAgICAgICAgLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0obmV3IExpbmVCcmVha1RyYW5zZm9ybWVyKHRoaXMuY29udHJvbENoYXJhY3RlcikpKVxyXG4gICAgICAgICAgLmdldFJlYWRlcigpO1xyXG4gIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCB0aGlzLnJlYWRlci5yZWFkKCk7XHJcbiAgICAgICAgICAgIGlmIChkb25lKSB7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZWFkRnVuY3Rpb24odmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWFkIExvb3AgZXJyb3IuIEhhdmUgdGhlIHNlcmlhbCBkZXZpY2UgYmVlbiBkaXNjb25uZWN0ZWQgPyBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgY2xvc2UoY2FsbGJhY2s6RnVuY3Rpb24pIHtcclxuICAgICAgdGhpcy5rZWVwUmVhZGluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnJlYWRlci5jYW5jZWwoKTtcclxuICAgICAgYXdhaXQgdGhpcy5yZWFkYWJsZVN0cmVhbUNsb3NlZC5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgICAgIHRoaXMud3JpdGVyLmNsb3NlKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMud3JpdGFibGVTdHJlYW1DbG9zZWQ7XHJcbiAgICAgIGF3YWl0IHRoaXMucG9ydC5jbG9zZSgpO1xyXG4gICAgICBjYWxsYmFjayhudWxsKTtcclxuICAgIH1cclxuICBcclxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0KGNhbGxiYWNrOkZ1bmN0aW9uKSB7XHJcbiAgICAgIHRoaXMua2VlcFJlYWRpbmcgPSB0cnVlO1xyXG4gICAgICBpZiAoXCJzZXJpYWxcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICAvLyBUaGUgV2ViIFNlcmlhbCBBUEkgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlxyXG4gICAgICAgIGxldCBuYXY6IGFueSA9IG5hdmlnYXRvcjtcclxuICAgICAgICBjb25zdCBwb3J0cyA9IGF3YWl0IG5hdi5zZXJpYWwuZ2V0UG9ydHMoKTtcclxuICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGhpcy5wb3J0ID0gYXdhaXQgbmF2LnNlcmlhbC5yZXF1ZXN0UG9ydCgpO1xyXG4gIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVxdWVzdGluZyBwb3J0IGVycm9yOiBcIiArIGVycm9yKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgYXdhaXQgdGhpcy5wb3J0Lm9wZW4odGhpcy5vcHRpb25zKTtcclxuICBcclxuICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5pbmcgcG9ydCBlcnJvcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIGNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyU3RyZWFtKCk7XHJcbiAgICAgICAgdGhpcy53cml0YWJsZVN0cmVhbUNsb3NlZCA9IHRleHRFbmNvZGVyLnJlYWRhYmxlLnBpcGVUbyh0aGlzLnBvcnQud3JpdGFibGUpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyID0gdGV4dEVuY29kZXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7XHJcbiAgXHJcbiAgICAgICAgdGhpcy5yZWFkTG9vcCgpO1xyXG4gIFxyXG4gICAgICAgIGNhbGxiYWNrKHRoaXMucG9ydCk7XHJcbiAgXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlRoaXMgYnJvd3NlciBkb2VzIE5PVCBzdXBwb3J0IHRoZSBXZWIgU2VyaWFsIEFQSVwiKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBjbGFzcyBMaW5lQnJlYWtUcmFuc2Zvcm1lciB7XHJcbiAgICBjb250YWluZXI6IGFueT1cIlwiO1xyXG4gICAgcHJpdmF0ZSBjb250cm9sQ2hhcmFjdGVyOiBzdHJpbmc7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9sQ2hhcmFjdGVyOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5jb250YWluZXIgPSAnJztcclxuICAgICAgdGhpcy5jb250cm9sQ2hhcmFjdGVyID0gY29udHJvbENoYXJhY3RlclxyXG4gICAgfVxyXG4gIFxyXG4gICAgdHJhbnNmb3JtKGNodW5rOmFueSwgY29udHJvbGxlcjphbnkpIHtcclxuICAgICAgdGhpcy5jb250YWluZXIgKz0gY2h1bms7XHJcbiAgICAgIGNvbnN0IGxpbmVzID0gdGhpcy5jb250YWluZXIuc3BsaXQodGhpcy5jb250cm9sQ2hhcmFjdGVyKTtcclxuICAgICAgdGhpcy5jb250YWluZXIgPSBsaW5lcy5wb3AoKTtcclxuICAgICAgbGluZXMuZm9yRWFjaCgobGluZTogYW55KSA9PiBjb250cm9sbGVyLmVucXVldWUobGluZSkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZmx1c2goY29udHJvbGxlcjphbnkpIHtcclxuICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRoaXMuY29udGFpbmVyKTtcclxuICAgIH1cclxuICB9Il19","customTransformCache":false,"dependencies":[],"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\lib\\ngx-serial.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class NgxSerial {\n    port;\n    options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default\n    writer;\n    readFunction;\n    controlCharacter = \"\\n\";\n    reader;\n    readableStreamClosed;\n    writableStreamClosed;\n    keepReading = true;\n    constructor(readFunction, options, controlCharacter) {\n        this.readFunction = readFunction;\n        if (options)\n            this.options = options;\n        if (controlCharacter)\n            this.controlCharacter = controlCharacter;\n    }\n    async sendData(data) {\n        await this.writer.write(data);\n    }\n    async readLoop() {\n        while (this.port.readable && this.keepReading) {\n            const textDecoder = new TextDecoderStream();\n            //const readableStream = new ReadableStream();\n            this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);\n            this.reader = textDecoder.readable\n                .pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))\n                .getReader();\n            try {\n                while (true) {\n                    const { value, done } = await this.reader.read();\n                    if (done) {\n                        break;\n                    }\n                    if (value) {\n                        this.readFunction(value);\n                    }\n                }\n            }\n            catch (error) {\n                console.error(\"Read Loop error. Have the serial device been disconnected ? \");\n            }\n        }\n    }\n    async close(callback) {\n        this.keepReading = false;\n        this.reader.cancel();\n        await this.readableStreamClosed.catch(() => { });\n        this.writer.close();\n        await this.writableStreamClosed;\n        await this.port.close();\n        callback(null);\n    }\n    async connect(callback) {\n        this.keepReading = true;\n        if (\"serial\" in navigator) {\n            // The Web Serial API is supported by the browser.\n            let nav = navigator;\n            const ports = await nav.serial.getPorts();\n            try {\n                this.port = await nav.serial.requestPort();\n            }\n            catch (error) {\n                console.error(\"Requesting port error: \" + error);\n                return;\n            }\n            try {\n                await this.port.open(this.options);\n            }\n            catch (error) {\n                console.error(\"Opening port error: \" + error);\n                return;\n            }\n            const textEncoder = new TextEncoderStream();\n            this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);\n            this.writer = textEncoder.writable.getWriter();\n            this.readLoop();\n            callback(this.port);\n        }\n        else {\n            console.error(\"This browser does NOT support the Web Serial API\");\n        }\n    }\n}\nclass LineBreakTransformer {\n    container = \"\";\n    controlCharacter;\n    constructor(controlCharacter) {\n        this.container = '';\n        this.controlCharacter = controlCharacter;\n    }\n    transform(chunk, controller) {\n        this.container += chunk;\n        const lines = this.container.split(this.controlCharacter);\n        this.container = lines.pop();\n        lines.forEach((line) => controller.enqueue(line));\n    }\n    flush(controller) {\n        controller.enqueue(this.container);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL2xpYi9uZ3gtc2VyaWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxTQUFTO0lBRVYsSUFBSSxDQUFNO0lBQ1YsT0FBTyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxTQUFTO0lBQzFHLE1BQU0sQ0FBTTtJQUNaLFlBQVksQ0FBVztJQUN2QixnQkFBZ0IsR0FBVyxJQUFJLENBQUM7SUFDaEMsTUFBTSxDQUFLO0lBQ1gsb0JBQW9CLENBQUs7SUFDekIsb0JBQW9CLENBQUs7SUFDekIsV0FBVyxHQUFXLElBQUksQ0FBQztJQUVuQyxZQUFZLFlBQXNCLEVBQUUsT0FBYSxFQUFFLGdCQUFzQjtRQUN2RSxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLE9BQU87WUFDVCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixJQUFJLGdCQUFnQjtZQUNsQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7SUFFN0MsQ0FBQztJQUNNLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUNoQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBUTtRQUdwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUcsQ0FBQztZQUMvQyxNQUFNLFdBQVcsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDNUMsOENBQThDO1lBQzlDLElBQUksQ0FBQyxv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Q0FBQzthQUFNLENBQUM7WUFDTixPQUFPLENBQUMsS0FBSyxDQUFDLGtEQUFrRCxDQUFDLENBQUM7UUFDcEUsQ0FBQztJQUVILENBQUM7Q0FDRjtBQUVELE1BQU0sb0JBQW9CO0lBQ3hCLFNBQVMsR0FBTSxFQUFFLENBQUM7SUFDVixnQkFBZ0IsQ0FBUztJQUVqQyxZQUFZLGdCQUF3QjtRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztRQUNwQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUE7SUFDMUMsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFTLEVBQUUsVUFBYztRQUNqQyxJQUFJLENBQUMsU0FBUyxJQUFJLEtBQUssQ0FBQztRQUN4QixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUMxRCxJQUFJLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUM3QixLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBUyxFQUFFLEVBQUUsQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDekQsQ0FBQztJQUVELEtBQUssQ0FBQyxVQUFjO1FBQ2xCLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5PTkVfVFlQRSB9IGZyb20gXCJAYW5ndWxhci9jb21waWxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE5neFNlcmlhbCB7XHJcblxyXG4gICAgcHJpdmF0ZSBwb3J0OiBhbnk7XHJcbiAgICBwcml2YXRlIG9wdGlvbnMgPSB7IGJhdWRSYXRlOiA5NjAwLCBkYXRhQml0czogOCwgcGFyaXR5OiAnbm9uZScsIGJ1ZmZlclNpemU6IDI1NiwgZmxvd0NvbnRyb2w6ICdub25lJyB9OyAvL0RlZmF1bHRcclxuICAgIHByaXZhdGUgd3JpdGVyOiBhbnk7XHJcbiAgICBwcml2YXRlIHJlYWRGdW5jdGlvbjogRnVuY3Rpb247XHJcbiAgICBwcml2YXRlIGNvbnRyb2xDaGFyYWN0ZXI6IHN0cmluZyA9IFwiXFxuXCI7XHJcbiAgICBwcml2YXRlIHJlYWRlcjphbnk7XHJcbiAgICBwcml2YXRlIHJlYWRhYmxlU3RyZWFtQ2xvc2VkOmFueTtcclxuICAgIHByaXZhdGUgd3JpdGFibGVTdHJlYW1DbG9zZWQ6YW55O1xyXG4gICAgcHJpdmF0ZSBrZWVwUmVhZGluZzpib29sZWFuID0gdHJ1ZTtcclxuICBcclxuICAgIGNvbnN0cnVjdG9yKHJlYWRGdW5jdGlvbjogRnVuY3Rpb24sIG9wdGlvbnM/OiBhbnksIGNvbnRyb2xDaGFyYWN0ZXI/OiBhbnkpIHtcclxuICAgICAgdGhpcy5yZWFkRnVuY3Rpb24gPSByZWFkRnVuY3Rpb247XHJcbiAgICAgIGlmIChvcHRpb25zKVxyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgIGlmIChjb250cm9sQ2hhcmFjdGVyKVxyXG4gICAgICAgIHRoaXMuY29udHJvbENoYXJhY3RlciA9IGNvbnRyb2xDaGFyYWN0ZXI7XHJcbiAgXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgc2VuZERhdGEoZGF0YTogc3RyaW5nKSB7XHJcbiAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKGRhdGEpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWFkTG9vcCgpIHtcclxuICAgICAgXHJcbiAgXHJcbiAgICAgIHdoaWxlICh0aGlzLnBvcnQucmVhZGFibGUgJiYgdGhpcy5rZWVwUmVhZGluZyApIHtcclxuICAgICAgICBjb25zdCB0ZXh0RGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlclN0cmVhbSgpO1xyXG4gICAgICAgIC8vY29uc3QgcmVhZGFibGVTdHJlYW0gPSBuZXcgUmVhZGFibGVTdHJlYW0oKTtcclxuICAgICAgICB0aGlzLnJlYWRhYmxlU3RyZWFtQ2xvc2VkID0gdGhpcy5wb3J0LnJlYWRhYmxlLnBpcGVUbyh0ZXh0RGVjb2Rlci53cml0YWJsZSk7XHJcbiAgICAgICAgdGhpcy5yZWFkZXIgPSB0ZXh0RGVjb2Rlci5yZWFkYWJsZVxyXG4gICAgICAgICAgLnBpcGVUaHJvdWdoKG5ldyBUcmFuc2Zvcm1TdHJlYW0obmV3IExpbmVCcmVha1RyYW5zZm9ybWVyKHRoaXMuY29udHJvbENoYXJhY3RlcikpKVxyXG4gICAgICAgICAgLmdldFJlYWRlcigpO1xyXG4gIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB7IHZhbHVlLCBkb25lIH0gPSBhd2FpdCB0aGlzLnJlYWRlci5yZWFkKCk7XHJcbiAgICAgICAgICAgIGlmIChkb25lKSB7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5yZWFkRnVuY3Rpb24odmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJSZWFkIExvb3AgZXJyb3IuIEhhdmUgdGhlIHNlcmlhbCBkZXZpY2UgYmVlbiBkaXNjb25uZWN0ZWQgPyBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYXN5bmMgY2xvc2UoY2FsbGJhY2s6RnVuY3Rpb24pIHtcclxuICAgICAgdGhpcy5rZWVwUmVhZGluZyA9IGZhbHNlO1xyXG4gICAgICB0aGlzLnJlYWRlci5jYW5jZWwoKTtcclxuICAgICAgYXdhaXQgdGhpcy5yZWFkYWJsZVN0cmVhbUNsb3NlZC5jYXRjaCgoKSA9PiB7fSk7XHJcbiAgICAgIHRoaXMud3JpdGVyLmNsb3NlKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMud3JpdGFibGVTdHJlYW1DbG9zZWQ7XHJcbiAgICAgIGF3YWl0IHRoaXMucG9ydC5jbG9zZSgpO1xyXG4gICAgICBjYWxsYmFjayhudWxsKTtcclxuICAgIH1cclxuICBcclxuICAgIHB1YmxpYyBhc3luYyBjb25uZWN0KGNhbGxiYWNrOkZ1bmN0aW9uKSB7XHJcbiAgICAgIHRoaXMua2VlcFJlYWRpbmcgPSB0cnVlO1xyXG4gICAgICBpZiAoXCJzZXJpYWxcIiBpbiBuYXZpZ2F0b3IpIHtcclxuICAgICAgICAvLyBUaGUgV2ViIFNlcmlhbCBBUEkgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyLlxyXG4gICAgICAgIGxldCBuYXY6IGFueSA9IG5hdmlnYXRvcjtcclxuICAgICAgICBjb25zdCBwb3J0cyA9IGF3YWl0IG5hdi5zZXJpYWwuZ2V0UG9ydHMoKTtcclxuICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGhpcy5wb3J0ID0gYXdhaXQgbmF2LnNlcmlhbC5yZXF1ZXN0UG9ydCgpO1xyXG4gIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVxdWVzdGluZyBwb3J0IGVycm9yOiBcIiArIGVycm9yKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgYXdhaXQgdGhpcy5wb3J0Lm9wZW4odGhpcy5vcHRpb25zKTtcclxuICBcclxuICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIk9wZW5pbmcgcG9ydCBlcnJvcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIGNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyU3RyZWFtKCk7XHJcbiAgICAgICAgdGhpcy53cml0YWJsZVN0cmVhbUNsb3NlZCA9IHRleHRFbmNvZGVyLnJlYWRhYmxlLnBpcGVUbyh0aGlzLnBvcnQud3JpdGFibGUpO1xyXG4gICAgICAgIHRoaXMud3JpdGVyID0gdGV4dEVuY29kZXIud3JpdGFibGUuZ2V0V3JpdGVyKCk7XHJcbiAgXHJcbiAgICAgICAgdGhpcy5yZWFkTG9vcCgpO1xyXG4gIFxyXG4gICAgICAgIGNhbGxiYWNrKHRoaXMucG9ydCk7XHJcbiAgXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIlRoaXMgYnJvd3NlciBkb2VzIE5PVCBzdXBwb3J0IHRoZSBXZWIgU2VyaWFsIEFQSVwiKTtcclxuICAgICAgfVxyXG4gIFxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICBjbGFzcyBMaW5lQnJlYWtUcmFuc2Zvcm1lciB7XHJcbiAgICBjb250YWluZXI6IGFueT1cIlwiO1xyXG4gICAgcHJpdmF0ZSBjb250cm9sQ2hhcmFjdGVyOiBzdHJpbmc7XHJcbiAgXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250cm9sQ2hhcmFjdGVyOiBzdHJpbmcpIHtcclxuICAgICAgdGhpcy5jb250YWluZXIgPSAnJztcclxuICAgICAgdGhpcy5jb250cm9sQ2hhcmFjdGVyID0gY29udHJvbENoYXJhY3RlclxyXG4gICAgfVxyXG4gIFxyXG4gICAgdHJhbnNmb3JtKGNodW5rOmFueSwgY29udHJvbGxlcjphbnkpIHtcclxuICAgICAgdGhpcy5jb250YWluZXIgKz0gY2h1bms7XHJcbiAgICAgIGNvbnN0IGxpbmVzID0gdGhpcy5jb250YWluZXIuc3BsaXQodGhpcy5jb250cm9sQ2hhcmFjdGVyKTtcclxuICAgICAgdGhpcy5jb250YWluZXIgPSBsaW5lcy5wb3AoKTtcclxuICAgICAgbGluZXMuZm9yRWFjaCgobGluZTogYW55KSA9PiBjb250cm9sbGVyLmVucXVldWUobGluZSkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZmx1c2goY29udHJvbGxlcjphbnkpIHtcclxuICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHRoaXMuY29udGFpbmVyKTtcclxuICAgIH1cclxuICB9Il19","originalSourcemap":{"version":3,"file":"ngx-serial.js","sourceRoot":"","sources":["../../../../projects/ngx-serial/src/lib/ngx-serial.ts"],"names":[],"mappings":[[[0,0,2,0],[6,0,2,6],[13,0,2,13],[22,0,2,22]],[[4,0,4,12],[8,0,4,16],[9,0,4,22]],[[4,0,5,12],[11,0,5,19],[14,0,5,22],[16,0,5,24],[24,0,5,32],[26,0,5,34],[30,0,5,38],[32,0,5,40],[40,0,5,48],[42,0,5,50],[43,0,5,51],[45,0,5,53],[51,0,5,59],[53,0,5,61],[59,0,5,67],[61,0,5,69],[71,0,5,79],[73,0,5,81],[76,0,5,84],[78,0,5,86],[89,0,5,97],[91,0,5,99],[97,0,5,105],[99,0,5,107],[100,0,5,108],[101,0,5,109],[110,0,5,118]],[[4,0,6,12],[10,0,6,18],[11,0,6,24]],[[4,0,7,12],[16,0,7,24],[17,0,7,35]],[[4,0,8,12],[20,0,8,28],[23,0,8,39],[27,0,8,43],[28,0,8,44]],[[4,0,9,12],[10,0,9,18],[11,0,9,23]],[[4,0,10,12],[24,0,10,32],[25,0,10,37]],[[4,0,11,12],[24,0,11,32],[25,0,11,37]],[[4,0,12,12],[15,0,12,23],[18,0,12,34],[22,0,12,38],[23,0,12,39]],[[4,0,14,4],[16,0,14,16],[28,0,14,38],[30,0,14,40],[37,0,14,53],[39,0,14,55],[55,0,14,77]],[[8,0,15,6],[12,0,15,10],[13,0,15,11],[25,0,15,23],[28,0,15,26],[40,0,15,38],[41,0,15,39]],[[8,0,16,6],[12,0,16,10],[19,0,16,17]],[[12,0,17,8],[16,0,17,12],[17,0,17,13],[24,0,17,20],[27,0,17,23],[34,0,17,30],[35,0,17,31]],[[8,0,18,6],[12,0,18,10],[28,0,18,26]],[[12,0,19,8],[16,0,19,12],[17,0,19,13],[33,0,19,29],[36,0,19,32],[52,0,19,48],[53,0,19,49]],[[4,0,21,4],[5,0,21,5]],[[4,0,22,11],[9,0,22,16],[10,0,22,17],[18,0,22,25],[19,0,22,26],[23,0,22,38]],[[8,0,23,6],[14,0,23,12],[18,0,23,16],[19,0,23,17],[25,0,23,23],[26,0,23,24],[31,0,23,29],[32,0,23,30],[36,0,23,34],[37,0,23,35],[38,0,23,36]],[[4,0,24,4],[5,0,24,5]],[[4,0,26,12],[9,0,26,17],[10,0,26,18],[18,0,26,26]],[[8,0,29,6],[15,0,29,13],[19,0,29,17],[20,0,29,18],[24,0,29,22],[25,0,29,23],[33,0,29,31],[37,0,29,35],[41,0,29,39],[42,0,29,40],[53,0,29,51],[55,0,29,54],[56,0,29,55]],[[12,0,30,8],[18,0,30,14],[29,0,30,25],[32,0,30,28],[36,0,30,32],[53,0,30,49],[55,0,30,51],[56,0,30,52]],[[12,0,31,8],[58,0,31,54]],[[12,0,32,8],[16,0,32,12],[17,0,32,13],[37,0,32,33],[40,0,32,36],[44,0,32,40],[45,0,32,41],[49,0,32,45],[50,0,32,46],[58,0,32,54],[59,0,32,55],[65,0,32,61],[66,0,32,62],[77,0,32,73],[78,0,32,74],[86,0,32,82],[87,0,32,83],[88,0,32,84]],[[12,0,33,8],[16,0,33,12],[17,0,33,13],[23,0,33,19],[26,0,33,22],[37,0,33,33],[38,0,33,34],[46,0,33,42]],[[17,0,34,11],[28,0,34,22],[29,0,34,23],[33,0,34,27],[48,0,34,42],[49,0,34,43],[53,0,34,47],[73,0,34,67],[74,0,34,68],[78,0,34,72],[79,0,34,73],[95,0,34,89],[96,0,34,90],[97,0,34,91],[98,0,34,92]],[[17,0,35,11],[26,0,35,20],[28,0,35,22],[29,0,35,23]],[[12,0,37,8],[16,0,37,12],[17,0,37,13]],[[16,0,38,10],[23,0,38,17],[27,0,38,21],[29,0,38,23],[30,0,38,24]],[[20,0,39,12],[26,0,39,18],[28,0,39,20],[33,0,39,25],[35,0,39,27],[39,0,39,31],[41,0,39,33],[44,0,39,36],[50,0,39,42],[54,0,39,46],[55,0,39,47],[61,0,39,53],[62,0,39,54],[66,0,39,58],[68,0,39,60],[69,0,39,61]],[[20,0,40,12],[24,0,40,16],[28,0,40,20],[30,0,40,22],[31,0,40,23]],[[24,0,41,14],[30,0,41,20]],[[20,0,42,12],[21,0,42,13]],[[20,0,43,12],[24,0,43,16],[29,0,43,21],[31,0,43,23],[32,0,43,24]],[[24,0,44,14],[28,0,44,18],[29,0,44,19],[41,0,44,31],[42,0,44,32],[47,0,44,37],[48,0,44,38],[49,0,44,39]],[[20,0,45,12],[21,0,45,13]],[[16,0,46,10],[17,0,46,11]],[[12,0,47,8],[13,0,47,9]],[[12,0,47,10],[19,0,47,17],[24,0,47,22],[26,0,47,24],[27,0,47,25]],[[16,0,48,10],[23,0,48,17],[24,0,48,18],[29,0,48,23],[30,0,48,24],[92,0,48,86],[93,0,48,87],[94,0,48,88]],[[12,0,49,8],[13,0,49,9]],[[8,0,50,6],[9,0,50,7]],[[4,0,51,4],[5,0,51,5]],[[4,0,52,11],[9,0,52,16],[10,0,52,17],[15,0,52,22],[16,0,52,23],[24,0,52,40]],[[8,0,53,6],[12,0,53,10],[13,0,53,11],[24,0,53,22],[27,0,53,25],[32,0,53,30],[33,0,53,31]],[[8,0,54,6],[12,0,54,10],[13,0,54,11],[19,0,54,17],[20,0,54,18],[26,0,54,24],[28,0,54,26],[29,0,54,27]],[[8,0,55,6],[14,0,55,12],[18,0,55,16],[19,0,55,17],[39,0,55,37],[40,0,55,38],[45,0,55,43],[46,0,55,44],[49,0,55,47],[51,0,55,49],[54,0,55,51],[55,0,55,52],[56,0,55,53],[57,0,55,54]],[[8,0,56,6],[12,0,56,10],[13,0,56,11],[19,0,56,17],[20,0,56,18],[25,0,56,23],[27,0,56,25],[28,0,56,26]],[[8,0,57,6],[14,0,57,12],[18,0,57,16],[19,0,57,17],[39,0,57,37],[40,0,57,38]],[[8,0,58,6],[14,0,58,12],[18,0,58,16],[19,0,58,17],[23,0,58,21],[24,0,58,22],[29,0,58,27],[31,0,58,29],[32,0,58,30]],[[8,0,59,6],[16,0,59,14],[17,0,59,15],[21,0,59,19],[22,0,59,20],[23,0,59,21]],[[4,0,60,4],[5,0,60,5]],[[4,0,62,11],[9,0,62,16],[10,0,62,17],[17,0,62,24],[18,0,62,25],[26,0,62,42]],[[8,0,63,6],[12,0,63,10],[13,0,63,11],[24,0,63,22],[27,0,63,25],[31,0,63,29],[32,0,63,30]],[[8,0,64,6],[12,0,64,10],[20,0,64,18],[24,0,64,22],[33,0,64,31],[35,0,64,33],[36,0,64,34]],[[12,0,65,8],[62,0,65,58]],[[12,0,66,8],[16,0,66,12],[19,0,66,15],[22,0,66,23],[31,0,66,32],[32,0,66,33]],[[12,0,67,8],[18,0,67,14],[23,0,67,19],[26,0,67,22],[32,0,67,28],[35,0,67,31],[36,0,67,32],[42,0,67,38],[43,0,67,39],[51,0,67,47],[53,0,67,49],[54,0,67,50]],[[12,0,69,8],[16,0,69,12],[17,0,69,13]],[[16,0,70,10],[20,0,70,14],[21,0,70,15],[25,0,70,19],[28,0,70,22],[34,0,70,28],[37,0,70,31],[38,0,70,32],[44,0,70,38],[45,0,70,39],[56,0,70,50],[58,0,70,52],[59,0,70,53]],[[12,0,72,8],[13,0,72,9]],[[12,0,72,10],[19,0,72,17],[24,0,72,22],[26,0,72,24],[27,0,72,25]],[[16,0,73,10],[23,0,73,17],[24,0,73,18],[29,0,73,23],[30,0,73,24],[55,0,73,49],[58,0,73,52],[63,0,73,57],[64,0,73,58],[65,0,73,59]],[[16,0,74,10],[23,0,74,17]],[[12,0,75,8],[13,0,75,9]],[[12,0,77,8],[16,0,77,12],[17,0,77,13]],[[16,0,78,9],[22,0,78,15],[26,0,78,19],[27,0,78,20],[31,0,78,24],[32,0,78,25],[36,0,78,29],[37,0,78,30],[41,0,78,34],[42,0,78,35],[49,0,78,42],[50,0,78,43],[51,0,78,44]],[[12,0,81,8],[13,0,81,9]],[[12,0,81,10],[19,0,81,17],[24,0,81,22],[26,0,81,24],[27,0,81,25]],[[16,0,82,10],[23,0,82,17],[24,0,82,18],[29,0,82,23],[30,0,82,24],[52,0,82,46],[55,0,82,49],[60,0,82,54],[61,0,82,55],[62,0,82,56]],[[16,0,83,10],[23,0,83,17]],[[12,0,84,8],[13,0,84,9]],[[12,0,86,8],[18,0,86,14],[29,0,86,25],[32,0,86,28],[36,0,86,32],[53,0,86,49],[55,0,86,51],[56,0,86,52]],[[12,0,87,8],[16,0,87,12],[17,0,87,13],[37,0,87,33],[40,0,87,36],[51,0,87,47],[52,0,87,48],[60,0,87,56],[61,0,87,57],[67,0,87,63],[68,0,87,64],[72,0,87,68],[73,0,87,69],[77,0,87,73],[78,0,87,74],[86,0,87,82],[87,0,87,83],[88,0,87,84]],[[12,0,88,8],[16,0,88,12],[17,0,88,13],[23,0,88,19],[26,0,88,22],[37,0,88,33],[38,0,88,34],[46,0,88,42],[47,0,88,43],[56,0,88,52],[58,0,88,54],[59,0,88,55]],[[12,0,90,8],[16,0,90,12],[17,0,90,13],[25,0,90,21],[27,0,90,23],[28,0,90,24]],[[12,0,92,8],[20,0,92,16],[21,0,92,17],[25,0,92,21],[26,0,92,22],[30,0,92,26],[31,0,92,27],[32,0,92,28]],[[8,0,94,6],[9,0,94,7]],[[13,0,94,13],[14,0,94,14]],[[12,0,95,8],[19,0,95,15],[20,0,95,16],[25,0,95,21],[26,0,95,22],[76,0,95,72],[77,0,95,73],[78,0,95,74]],[[8,0,96,6],[9,0,96,7]],[[4,0,98,4],[5,0,98,5]],[[1,0,99,3]],[[0,0,101,2],[6,0,101,8],[26,0,101,28]],[[4,0,102,4],[13,0,102,13],[16,0,102,19],[18,0,102,21],[19,0,102,22]],[[4,0,103,12],[20,0,103,28],[21,0,103,37]],[[4,0,105,4],[16,0,105,16],[32,0,105,40]],[[8,0,106,6],[12,0,106,10],[13,0,106,11],[22,0,106,20],[25,0,106,23],[27,0,106,25],[28,0,106,26]],[[8,0,107,6],[12,0,107,10],[13,0,107,11],[29,0,107,27],[32,0,107,30],[48,0,107,46],[49,0,107,46]],[[4,0,108,4],[5,0,108,5]],[[4,0,110,4],[13,0,110,13],[14,0,110,14],[19,0,110,23],[21,0,110,25],[31,0,110,39]],[[8,0,111,6],[12,0,111,10],[13,0,111,11],[22,0,111,20],[26,0,111,24],[31,0,111,29],[32,0,111,30]],[[8,0,112,6],[14,0,112,12],[19,0,112,17],[22,0,112,20],[26,0,112,24],[27,0,112,25],[36,0,112,34],[37,0,112,35],[42,0,112,40],[43,0,112,41],[47,0,112,45],[48,0,112,46],[64,0,112,62],[65,0,112,63],[66,0,112,64]],[[8,0,113,6],[12,0,113,10],[13,0,113,11],[22,0,113,20],[25,0,113,23],[30,0,113,28],[31,0,113,29],[34,0,113,32],[36,0,113,34],[37,0,113,35]],[[8,0,114,6],[13,0,114,11],[14,0,114,12],[21,0,114,19],[22,0,114,20],[23,0,114,21],[27,0,114,30],[29,0,114,32],[31,0,114,34],[32,0,114,35],[42,0,114,45],[43,0,114,46],[50,0,114,53],[51,0,114,54],[55,0,114,58],[56,0,114,59],[57,0,114,60],[58,0,114,61]],[[4,0,115,4],[5,0,115,5]],[[4,0,117,4],[9,0,117,9],[10,0,117,10],[20,0,117,24]],[[8,0,118,6],[18,0,118,16],[19,0,118,17],[26,0,118,24],[27,0,118,25],[31,0,118,29],[32,0,118,30],[41,0,118,39],[42,0,118,40],[43,0,118,41]],[[4,0,119,4],[5,0,119,5]],[[1,0,120,3]]],"sourcesContent":["import { NONE_TYPE } from \"@angular/compiler\";\r\n\r\nexport class NgxSerial {\r\n\r\n    private port: any;\r\n    private options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default\r\n    private writer: any;\r\n    private readFunction: Function;\r\n    private controlCharacter: string = \"\\n\";\r\n    private reader:any;\r\n    private readableStreamClosed:any;\r\n    private writableStreamClosed:any;\r\n    private keepReading:boolean = true;\r\n  \r\n    constructor(readFunction: Function, options?: any, controlCharacter?: any) {\r\n      this.readFunction = readFunction;\r\n      if (options)\r\n        this.options = options;\r\n      if (controlCharacter)\r\n        this.controlCharacter = controlCharacter;\r\n  \r\n    }\r\n    public async sendData(data: string) {\r\n      await this.writer.write(data);\r\n    }\r\n  \r\n    private async readLoop() {\r\n      \r\n  \r\n      while (this.port.readable && this.keepReading ) {\r\n        const textDecoder = new TextDecoderStream();\r\n        //const readableStream = new ReadableStream();\r\n        this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);\r\n        this.reader = textDecoder.readable\r\n          .pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))\r\n          .getReader();\r\n  \r\n        try {\r\n          while (true) {\r\n            const { value, done } = await this.reader.read();\r\n            if (done) {\r\n              break;\r\n            }\r\n            if (value) {\r\n              this.readFunction(value);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Read Loop error. Have the serial device been disconnected ? \");\r\n        }\r\n      }\r\n    }\r\n    public async close(callback:Function) {\r\n      this.keepReading = false;\r\n      this.reader.cancel();\r\n      await this.readableStreamClosed.catch(() => {});\r\n      this.writer.close();\r\n      await this.writableStreamClosed;\r\n      await this.port.close();\r\n      callback(null);\r\n    }\r\n  \r\n    public async connect(callback:Function) {\r\n      this.keepReading = true;\r\n      if (\"serial\" in navigator) {\r\n        // The Web Serial API is supported by the browser.\r\n        let nav: any = navigator;\r\n        const ports = await nav.serial.getPorts();\r\n  \r\n        try {\r\n          this.port = await nav.serial.requestPort();\r\n  \r\n        } catch (error) {\r\n          console.error(\"Requesting port error: \" + error);\r\n          return;\r\n        }\r\n  \r\n        try {\r\n         await this.port.open(this.options);\r\n  \r\n  \r\n        } catch (error) {\r\n          console.error(\"Opening port error: \" + error);\r\n          return;\r\n        }\r\n  \r\n        const textEncoder = new TextEncoderStream();\r\n        this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);\r\n        this.writer = textEncoder.writable.getWriter();\r\n  \r\n        this.readLoop();\r\n  \r\n        callback(this.port);\r\n  \r\n      } else {\r\n        console.error(\"This browser does NOT support the Web Serial API\");\r\n      }\r\n  \r\n    }\r\n  }\r\n  \r\n  class LineBreakTransformer {\r\n    container: any=\"\";\r\n    private controlCharacter: string;\r\n  \r\n    constructor(controlCharacter: string) {\r\n      this.container = '';\r\n      this.controlCharacter = controlCharacter\r\n    }\r\n  \r\n    transform(chunk:any, controller:any) {\r\n      this.container += chunk;\r\n      const lines = this.container.split(this.controlCharacter);\r\n      this.container = lines.pop();\r\n      lines.forEach((line: any) => controller.enqueue(line));\r\n    }\r\n  \r\n    flush(controller:any) {\r\n      controller.enqueue(this.container);\r\n    }\r\n  }"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":846,"body":[{"type":"ExportAllDeclaration","start":174,"end":207,"exported":null,"source":{"type":"Literal","start":188,"end":206,"value":"./lib/ngx-serial","raw":"'./lib/ngx-serial'"},"attributes":[]}],"_rollupRemoved":[{"end":846,"start":208,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"/*\n * Public API Surface of ngx-serial\n */\n/*export * from './lib/ngx-serial.service';\nexport * from './lib/ngx-serial.component';\nexport * from './lib/ngx-serial.module';*/\nexport * from './lib/ngx-serial';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL3B1YmxpYy1hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSDs7MENBRTBDO0FBQzFDLGNBQWMsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2Ygbmd4LXNlcmlhbFxyXG4gKi9cclxuXHJcbi8qZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5zZXJ2aWNlJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5jb21wb25lbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9uZ3gtc2VyaWFsLm1vZHVsZSc7Ki9cclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbCc7XHJcbiJdfQ==","customTransformCache":false,"dependencies":["C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\lib\\ngx-serial.mjs"],"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/*\n * Public API Surface of ngx-serial\n */\n/*export * from './lib/ngx-serial.service';\nexport * from './lib/ngx-serial.component';\nexport * from './lib/ngx-serial.module';*/\nexport * from './lib/ngx-serial';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL3B1YmxpYy1hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSDs7MENBRTBDO0FBQzFDLGNBQWMsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2Ygbmd4LXNlcmlhbFxyXG4gKi9cclxuXHJcbi8qZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5zZXJ2aWNlJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5jb21wb25lbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9uZ3gtc2VyaWFsLm1vZHVsZSc7Ki9cclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbCc7XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"public-api.js","sourceRoot":"","sources":["../../../projects/ngx-serial/src/public-api.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0]],[],[[42,0,6,42]],[[0,0,7,0],[14,0,7,14],[32,0,7,32],[33,0,7,33]]],"sourcesContent":["/*\r\n * Public API Surface of ngx-serial\r\n */\r\n\r\n/*export * from './lib/ngx-serial.service';\r\nexport * from './lib/ngx-serial.component';\r\nexport * from './lib/ngx-serial.module';*/\r\nexport * from './lib/ngx-serial';\r\n"]},"resolvedIds":{"./lib/ngx-serial":{"attributes":{},"external":false,"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\lib\\ngx-serial.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":496,"body":[{"type":"ExportAllDeclaration","start":48,"end":77,"exported":null,"source":{"type":"Literal","start":62,"end":76,"value":"./public-api","raw":"'./public-api'"},"attributes":[]}],"_rollupRemoved":[{"end":496,"start":78,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL25neC1zZXJpYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","customTransformCache":false,"dependencies":["C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\public-api.mjs"],"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\ngx-serial.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL25neC1zZXJpYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","originalSourcemap":{"version":3,"file":"ngx-serial.js","sourceRoot":"","sources":["../../../projects/ngx-serial/src/ngx-serial.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[28,0,4,28],[29,0,4,29]]],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"resolvedIds":{"./public-api":{"attributes":{},"external":false,"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]}],"plugins":{"node-resolve":{},"json":{},"file-loader":{}}}