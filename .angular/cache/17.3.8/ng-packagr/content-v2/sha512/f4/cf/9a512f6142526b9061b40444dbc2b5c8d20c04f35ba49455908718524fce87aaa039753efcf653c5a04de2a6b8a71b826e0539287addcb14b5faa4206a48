{"modules":[{"ast":{"type":"Program","start":0,"end":13027,"body":[{"type":"ExportNamedDeclaration","start":0,"end":2930,"specifiers":[],"source":null,"attributes":[],"declaration":{"type":"ClassDeclaration","start":7,"end":2930,"id":{"type":"Identifier","start":13,"end":22,"name":"NgxSerial"},"superClass":null,"body":{"type":"ClassBody","start":23,"end":2930,"body":[{"type":"PropertyDefinition","start":29,"end":34,"static":false,"computed":false,"key":{"type":"Identifier","start":29,"end":33,"name":"port"},"value":null},{"type":"PropertyDefinition","start":39,"end":135,"static":false,"computed":false,"key":{"type":"Identifier","start":39,"end":46,"name":"options"},"value":{"type":"ObjectExpression","start":49,"end":134,"properties":[{"type":"Property","start":51,"end":65,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":51,"end":59,"name":"baudRate"},"value":{"type":"Literal","start":61,"end":65,"raw":"9600","value":9600},"kind":"init"},{"type":"Property","start":67,"end":78,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":67,"end":75,"name":"dataBits"},"value":{"type":"Literal","start":77,"end":78,"raw":"8","value":8},"kind":"init"},{"type":"Property","start":80,"end":94,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":80,"end":86,"name":"parity"},"value":{"type":"Literal","start":88,"end":94,"value":"none","raw":"'none'"},"kind":"init"},{"type":"Property","start":96,"end":111,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":96,"end":106,"name":"bufferSize"},"value":{"type":"Literal","start":108,"end":111,"raw":"256","value":256},"kind":"init"},{"type":"Property","start":113,"end":132,"method":false,"shorthand":false,"computed":false,"key":{"type":"Identifier","start":113,"end":124,"name":"flowControl"},"value":{"type":"Literal","start":126,"end":132,"value":"none","raw":"'none'"},"kind":"init"}]}},{"type":"PropertyDefinition","start":150,"end":157,"static":false,"computed":false,"key":{"type":"Identifier","start":150,"end":156,"name":"writer"},"value":null},{"type":"PropertyDefinition","start":162,"end":175,"static":false,"computed":false,"key":{"type":"Identifier","start":162,"end":174,"name":"readFunction"},"value":null},{"type":"PropertyDefinition","start":180,"end":204,"static":false,"computed":false,"key":{"type":"Identifier","start":180,"end":196,"name":"controlCharacter"},"value":{"type":"Literal","start":199,"end":203,"value":"\n","raw":"\"\\n\""}},{"type":"PropertyDefinition","start":209,"end":216,"static":false,"computed":false,"key":{"type":"Identifier","start":209,"end":215,"name":"reader"},"value":null},{"type":"PropertyDefinition","start":221,"end":242,"static":false,"computed":false,"key":{"type":"Identifier","start":221,"end":241,"name":"readableStreamClosed"},"value":null},{"type":"PropertyDefinition","start":247,"end":268,"static":false,"computed":false,"key":{"type":"Identifier","start":247,"end":267,"name":"writableStreamClosed"},"value":null},{"type":"PropertyDefinition","start":273,"end":292,"static":false,"computed":false,"key":{"type":"Identifier","start":273,"end":284,"name":"keepReading"},"value":{"type":"Literal","start":287,"end":291,"value":true,"raw":"true"}},{"type":"MethodDefinition","start":297,"end":540,"static":false,"computed":false,"key":{"type":"Identifier","start":297,"end":308,"name":"constructor"},"value":{"type":"FunctionExpression","start":308,"end":540,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":309,"end":321,"name":"readFunction"},{"type":"Identifier","start":323,"end":330,"name":"options"},{"type":"Identifier","start":332,"end":348,"name":"controlCharacter"}],"body":{"type":"BlockStatement","start":350,"end":540,"body":[{"type":"ExpressionStatement","start":360,"end":393,"expression":{"type":"AssignmentExpression","start":360,"end":392,"operator":"=","left":{"type":"MemberExpression","start":360,"end":377,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":360,"end":364},"property":{"type":"Identifier","start":365,"end":377,"name":"readFunction"}},"right":{"type":"Identifier","start":380,"end":392,"name":"readFunction"}}},{"type":"IfStatement","start":402,"end":450,"test":{"type":"Identifier","start":406,"end":413,"name":"options"},"consequent":{"type":"ExpressionStatement","start":427,"end":450,"expression":{"type":"AssignmentExpression","start":427,"end":449,"operator":"=","left":{"type":"MemberExpression","start":427,"end":439,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":427,"end":431},"property":{"type":"Identifier","start":432,"end":439,"name":"options"}},"right":{"type":"Identifier","start":442,"end":449,"name":"options"}}},"alternate":null},{"type":"IfStatement","start":459,"end":534,"test":{"type":"Identifier","start":463,"end":479,"name":"controlCharacter"},"consequent":{"type":"ExpressionStatement","start":493,"end":534,"expression":{"type":"AssignmentExpression","start":493,"end":533,"operator":"=","left":{"type":"MemberExpression","start":493,"end":514,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":493,"end":497},"property":{"type":"Identifier","start":498,"end":514,"name":"controlCharacter"}},"right":{"type":"Identifier","start":517,"end":533,"name":"controlCharacter"}}},"alternate":null}]},"expression":false},"kind":"constructor"},{"type":"MethodDefinition","start":545,"end":612,"static":false,"computed":false,"key":{"type":"Identifier","start":551,"end":559,"name":"sendData"},"value":{"type":"FunctionExpression","start":559,"end":612,"async":true,"generator":false,"id":null,"params":[{"type":"Identifier","start":560,"end":564,"name":"data"}],"body":{"type":"BlockStatement","start":566,"end":612,"body":[{"type":"ExpressionStatement","start":576,"end":606,"expression":{"type":"AwaitExpression","start":576,"end":605,"argument":{"type":"CallExpression","start":582,"end":605,"optional":false,"callee":{"type":"MemberExpression","start":582,"end":599,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":582,"end":593,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":582,"end":586},"property":{"type":"Identifier","start":587,"end":593,"name":"writer"}},"property":{"type":"Identifier","start":594,"end":599,"name":"write"}},"arguments":[{"type":"Identifier","start":600,"end":604,"name":"data"}]}}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":617,"end":1569,"static":false,"computed":false,"key":{"type":"Identifier","start":623,"end":631,"name":"readLoop"},"value":{"type":"FunctionExpression","start":631,"end":1569,"async":true,"generator":false,"id":null,"params":[],"body":{"type":"BlockStatement","start":634,"end":1569,"body":[{"type":"WhileStatement","start":644,"end":1563,"test":{"type":"LogicalExpression","start":651,"end":689,"operator":"&&","left":{"type":"MemberExpression","start":651,"end":669,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":651,"end":660,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":651,"end":655},"property":{"type":"Identifier","start":656,"end":660,"name":"port"}},"property":{"type":"Identifier","start":661,"end":669,"name":"readable"}},"right":{"type":"MemberExpression","start":673,"end":689,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":673,"end":677},"property":{"type":"Identifier","start":678,"end":689,"name":"keepReading"}}},"body":{"type":"BlockStatement","start":691,"end":1563,"body":[{"type":"VariableDeclaration","start":705,"end":749,"kind":"const","declarations":[{"type":"VariableDeclarator","start":711,"end":748,"id":{"type":"Identifier","start":711,"end":722,"name":"textDecoder"},"init":{"type":"NewExpression","start":725,"end":748,"callee":{"type":"Identifier","start":729,"end":746,"name":"TextDecoderStream"},"arguments":[]}}]},{"type":"ExpressionStatement","start":821,"end":897,"expression":{"type":"AssignmentExpression","start":821,"end":896,"operator":"=","left":{"type":"MemberExpression","start":821,"end":846,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":821,"end":825},"property":{"type":"Identifier","start":826,"end":846,"name":"readableStreamClosed"}},"right":{"type":"CallExpression","start":849,"end":896,"optional":false,"callee":{"type":"MemberExpression","start":849,"end":874,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":849,"end":867,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":849,"end":858,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":849,"end":853},"property":{"type":"Identifier","start":854,"end":858,"name":"port"}},"property":{"type":"Identifier","start":859,"end":867,"name":"readable"}},"property":{"type":"Identifier","start":868,"end":874,"name":"pipeTo"}},"arguments":[{"type":"MemberExpression","start":875,"end":895,"computed":false,"optional":false,"object":{"type":"Identifier","start":875,"end":886,"name":"textDecoder"},"property":{"type":"Identifier","start":887,"end":895,"name":"writable"}}]}}},{"type":"ExpressionStatement","start":910,"end":1075,"expression":{"type":"AssignmentExpression","start":910,"end":1074,"operator":"=","left":{"type":"MemberExpression","start":910,"end":921,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":910,"end":914},"property":{"type":"Identifier","start":915,"end":921,"name":"reader"}},"right":{"type":"CallExpression","start":924,"end":1074,"optional":false,"callee":{"type":"MemberExpression","start":924,"end":1072,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":924,"end":944,"computed":false,"optional":false,"object":{"type":"Identifier","start":924,"end":935,"name":"textDecoder"},"property":{"type":"Identifier","start":936,"end":944,"name":"readable"}},"property":{"type":"Identifier","start":1063,"end":1072,"name":"getReader"}},"arguments":[]}}},{"type":"TryStatement","start":1088,"end":1553,"block":{"type":"BlockStatement","start":1092,"end":1416,"body":[{"type":"WhileStatement","start":1110,"end":1402,"test":{"type":"Literal","start":1117,"end":1121,"value":true,"raw":"true"},"body":{"type":"BlockStatement","start":1123,"end":1402,"body":[{"type":"VariableDeclaration","start":1145,"end":1194,"kind":"const","declarations":[{"type":"VariableDeclarator","start":1151,"end":1193,"id":{"type":"ObjectPattern","start":1151,"end":1166,"properties":[{"type":"Property","start":1153,"end":1158,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1153,"end":1158,"name":"value"},"value":{"type":"Identifier","start":1153,"end":1158,"name":"value"},"kind":"init"},{"type":"Property","start":1160,"end":1164,"method":false,"shorthand":true,"computed":false,"key":{"type":"Identifier","start":1160,"end":1164,"name":"done"},"value":{"type":"Identifier","start":1160,"end":1164,"name":"done"},"kind":"init"}]},"init":{"type":"AwaitExpression","start":1169,"end":1193,"argument":{"type":"CallExpression","start":1175,"end":1193,"optional":false,"callee":{"type":"MemberExpression","start":1175,"end":1191,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1175,"end":1186,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1175,"end":1179},"property":{"type":"Identifier","start":1180,"end":1186,"name":"reader"}},"property":{"type":"Identifier","start":1187,"end":1191,"name":"read"}},"arguments":[]}}}]},{"type":"IfStatement","start":1215,"end":1279,"test":{"type":"Identifier","start":1219,"end":1223,"name":"done"},"consequent":{"type":"BlockStatement","start":1225,"end":1279,"body":[{"type":"BreakStatement","start":1251,"end":1257,"label":null}]},"alternate":null},{"type":"IfStatement","start":1300,"end":1384,"test":{"type":"Identifier","start":1304,"end":1309,"name":"value"},"consequent":{"type":"BlockStatement","start":1311,"end":1384,"body":[{"type":"ExpressionStatement","start":1337,"end":1362,"expression":{"type":"CallExpression","start":1337,"end":1361,"optional":false,"callee":{"type":"MemberExpression","start":1337,"end":1354,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1337,"end":1341},"property":{"type":"Identifier","start":1342,"end":1354,"name":"readFunction"}},"arguments":[{"type":"Identifier","start":1355,"end":1360,"name":"value"}]}}]},"alternate":null}]}}]},"handler":{"type":"CatchClause","start":1429,"end":1553,"param":{"type":"Identifier","start":1436,"end":1441,"name":"error"},"body":{"type":"BlockStatement","start":1443,"end":1553,"body":[{"type":"ExpressionStatement","start":1461,"end":1539,"expression":{"type":"CallExpression","start":1461,"end":1538,"optional":false,"callee":{"type":"MemberExpression","start":1461,"end":1474,"computed":false,"optional":false,"object":{"type":"Identifier","start":1461,"end":1468,"name":"console"},"property":{"type":"Identifier","start":1469,"end":1474,"name":"error"}},"arguments":[{"type":"Literal","start":1475,"end":1537,"value":"Read Loop error. Have the serial device been disconnected ? ","raw":"\"Read Loop error. Have the serial device been disconnected ? \""}]}}]}},"finalizer":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":1574,"end":1852,"static":false,"computed":false,"key":{"type":"Identifier","start":1580,"end":1585,"name":"close"},"value":{"type":"FunctionExpression","start":1585,"end":1852,"async":true,"generator":false,"id":null,"params":[{"type":"Identifier","start":1586,"end":1594,"name":"callback"}],"body":{"type":"BlockStatement","start":1596,"end":1852,"body":[{"type":"ExpressionStatement","start":1606,"end":1631,"expression":{"type":"AssignmentExpression","start":1606,"end":1630,"operator":"=","left":{"type":"MemberExpression","start":1606,"end":1622,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1606,"end":1610},"property":{"type":"Identifier","start":1611,"end":1622,"name":"keepReading"}},"right":{"type":"Literal","start":1625,"end":1630,"value":false,"raw":"false"}}},{"type":"ExpressionStatement","start":1640,"end":1661,"expression":{"type":"CallExpression","start":1640,"end":1660,"optional":false,"callee":{"type":"MemberExpression","start":1640,"end":1658,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1640,"end":1651,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1640,"end":1644},"property":{"type":"Identifier","start":1645,"end":1651,"name":"reader"}},"property":{"type":"Identifier","start":1652,"end":1658,"name":"cancel"}},"arguments":[]}},{"type":"ExpressionStatement","start":1670,"end":1719,"expression":{"type":"AwaitExpression","start":1670,"end":1718,"argument":{"type":"CallExpression","start":1676,"end":1718,"optional":false,"callee":{"type":"MemberExpression","start":1676,"end":1707,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1676,"end":1701,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1676,"end":1680},"property":{"type":"Identifier","start":1681,"end":1701,"name":"readableStreamClosed"}},"property":{"type":"Identifier","start":1702,"end":1707,"name":"catch"}},"arguments":[{"type":"ArrowFunctionExpression","start":1708,"end":1717,"async":false,"expression":false,"generator":false,"params":[],"body":{"type":"BlockStatement","start":1714,"end":1717,"body":[]},"id":null}]}}},{"type":"ExpressionStatement","start":1728,"end":1748,"expression":{"type":"CallExpression","start":1728,"end":1747,"optional":false,"callee":{"type":"MemberExpression","start":1728,"end":1745,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1728,"end":1739,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1728,"end":1732},"property":{"type":"Identifier","start":1733,"end":1739,"name":"writer"}},"property":{"type":"Identifier","start":1740,"end":1745,"name":"close"}},"arguments":[]}},{"type":"ExpressionStatement","start":1757,"end":1789,"expression":{"type":"AwaitExpression","start":1757,"end":1788,"argument":{"type":"MemberExpression","start":1763,"end":1788,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1763,"end":1767},"property":{"type":"Identifier","start":1768,"end":1788,"name":"writableStreamClosed"}}}},{"type":"ExpressionStatement","start":1798,"end":1822,"expression":{"type":"AwaitExpression","start":1798,"end":1821,"argument":{"type":"CallExpression","start":1804,"end":1821,"optional":false,"callee":{"type":"MemberExpression","start":1804,"end":1819,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":1804,"end":1813,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1804,"end":1808},"property":{"type":"Identifier","start":1809,"end":1813,"name":"port"}},"property":{"type":"Identifier","start":1814,"end":1819,"name":"close"}},"arguments":[]}}},{"type":"ExpressionStatement","start":1831,"end":1846,"expression":{"type":"CallExpression","start":1831,"end":1845,"optional":false,"callee":{"type":"Identifier","start":1831,"end":1839,"name":"callback"},"arguments":[{"type":"Literal","start":1840,"end":1844,"raw":"null","value":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":1857,"end":2928,"static":false,"computed":false,"key":{"type":"Identifier","start":1863,"end":1870,"name":"connect"},"value":{"type":"FunctionExpression","start":1870,"end":2928,"async":true,"generator":false,"id":null,"params":[{"type":"Identifier","start":1871,"end":1879,"name":"callback"}],"body":{"type":"BlockStatement","start":1881,"end":2928,"body":[{"type":"ExpressionStatement","start":1891,"end":1915,"expression":{"type":"AssignmentExpression","start":1891,"end":1914,"operator":"=","left":{"type":"MemberExpression","start":1891,"end":1907,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":1891,"end":1895},"property":{"type":"Identifier","start":1896,"end":1907,"name":"keepReading"}},"right":{"type":"Literal","start":1910,"end":1914,"value":true,"raw":"true"}}},{"type":"IfStatement","start":1924,"end":2922,"test":{"type":"BinaryExpression","start":1928,"end":1949,"operator":"in","left":{"type":"Literal","start":1928,"end":1936,"value":"serial","raw":"\"serial\""},"right":{"type":"Identifier","start":1940,"end":1949,"name":"navigator"}},"consequent":{"type":"BlockStatement","start":1951,"end":2818,"body":[{"type":"VariableDeclaration","start":2028,"end":2048,"kind":"let","declarations":[{"type":"VariableDeclarator","start":2032,"end":2047,"id":{"type":"Identifier","start":2032,"end":2035,"name":"nav"},"init":{"type":"Identifier","start":2038,"end":2047,"name":"navigator"}}]},{"type":"VariableDeclaration","start":2061,"end":2103,"kind":"const","declarations":[{"type":"VariableDeclarator","start":2067,"end":2102,"id":{"type":"Identifier","start":2067,"end":2072,"name":"ports"},"init":{"type":"AwaitExpression","start":2075,"end":2102,"argument":{"type":"CallExpression","start":2081,"end":2102,"optional":false,"callee":{"type":"MemberExpression","start":2081,"end":2100,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2081,"end":2091,"computed":false,"optional":false,"object":{"type":"Identifier","start":2081,"end":2084,"name":"nav"},"property":{"type":"Identifier","start":2085,"end":2091,"name":"serial"}},"property":{"type":"Identifier","start":2092,"end":2100,"name":"getPorts"}},"arguments":[]}}}]},{"type":"TryStatement","start":2116,"end":2327,"block":{"type":"BlockStatement","start":2120,"end":2195,"body":[{"type":"ExpressionStatement","start":2138,"end":2181,"expression":{"type":"AssignmentExpression","start":2138,"end":2180,"operator":"=","left":{"type":"MemberExpression","start":2138,"end":2147,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2138,"end":2142},"property":{"type":"Identifier","start":2143,"end":2147,"name":"port"}},"right":{"type":"AwaitExpression","start":2150,"end":2180,"argument":{"type":"CallExpression","start":2156,"end":2180,"optional":false,"callee":{"type":"MemberExpression","start":2156,"end":2178,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2156,"end":2166,"computed":false,"optional":false,"object":{"type":"Identifier","start":2156,"end":2159,"name":"nav"},"property":{"type":"Identifier","start":2160,"end":2166,"name":"serial"}},"property":{"type":"Identifier","start":2167,"end":2178,"name":"requestPort"}},"arguments":[]}}}}]},"handler":{"type":"CatchClause","start":2208,"end":2327,"param":{"type":"Identifier","start":2215,"end":2220,"name":"error"},"body":{"type":"BlockStatement","start":2222,"end":2327,"body":[{"type":"ExpressionStatement","start":2240,"end":2289,"expression":{"type":"CallExpression","start":2240,"end":2288,"optional":false,"callee":{"type":"MemberExpression","start":2240,"end":2253,"computed":false,"optional":false,"object":{"type":"Identifier","start":2240,"end":2247,"name":"console"},"property":{"type":"Identifier","start":2248,"end":2253,"name":"error"}},"arguments":[{"type":"BinaryExpression","start":2254,"end":2287,"operator":"+","left":{"type":"Literal","start":2254,"end":2279,"value":"Requesting port error: ","raw":"\"Requesting port error: \""},"right":{"type":"Identifier","start":2282,"end":2287,"name":"error"}}]}},{"type":"ReturnStatement","start":2306,"end":2313,"argument":null}]}},"finalizer":null},{"type":"TryStatement","start":2340,"end":2540,"block":{"type":"BlockStatement","start":2344,"end":2411,"body":[{"type":"ExpressionStatement","start":2362,"end":2397,"expression":{"type":"AwaitExpression","start":2362,"end":2396,"argument":{"type":"CallExpression","start":2368,"end":2396,"optional":false,"callee":{"type":"MemberExpression","start":2368,"end":2382,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2368,"end":2377,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2368,"end":2372},"property":{"type":"Identifier","start":2373,"end":2377,"name":"port"}},"property":{"type":"Identifier","start":2378,"end":2382,"name":"open"}},"arguments":[{"type":"MemberExpression","start":2383,"end":2395,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2383,"end":2387},"property":{"type":"Identifier","start":2388,"end":2395,"name":"options"}}]}}}]},"handler":{"type":"CatchClause","start":2424,"end":2540,"param":{"type":"Identifier","start":2431,"end":2436,"name":"error"},"body":{"type":"BlockStatement","start":2438,"end":2540,"body":[{"type":"ExpressionStatement","start":2456,"end":2502,"expression":{"type":"CallExpression","start":2456,"end":2501,"optional":false,"callee":{"type":"MemberExpression","start":2456,"end":2469,"computed":false,"optional":false,"object":{"type":"Identifier","start":2456,"end":2463,"name":"console"},"property":{"type":"Identifier","start":2464,"end":2469,"name":"error"}},"arguments":[{"type":"BinaryExpression","start":2470,"end":2500,"operator":"+","left":{"type":"Literal","start":2470,"end":2492,"value":"Opening port error: ","raw":"\"Opening port error: \""},"right":{"type":"Identifier","start":2495,"end":2500,"name":"error"}}]}},{"type":"ReturnStatement","start":2519,"end":2526,"argument":null}]}},"finalizer":null},{"type":"VariableDeclaration","start":2553,"end":2597,"kind":"const","declarations":[{"type":"VariableDeclarator","start":2559,"end":2596,"id":{"type":"Identifier","start":2559,"end":2570,"name":"textEncoder"},"init":{"type":"NewExpression","start":2573,"end":2596,"callee":{"type":"Identifier","start":2577,"end":2594,"name":"TextEncoderStream"},"arguments":[]}}]},{"type":"ExpressionStatement","start":2610,"end":2686,"expression":{"type":"AssignmentExpression","start":2610,"end":2685,"operator":"=","left":{"type":"MemberExpression","start":2610,"end":2635,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2610,"end":2614},"property":{"type":"Identifier","start":2615,"end":2635,"name":"writableStreamClosed"}},"right":{"type":"CallExpression","start":2638,"end":2685,"optional":false,"callee":{"type":"MemberExpression","start":2638,"end":2665,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2638,"end":2658,"computed":false,"optional":false,"object":{"type":"Identifier","start":2638,"end":2649,"name":"textEncoder"},"property":{"type":"Identifier","start":2650,"end":2658,"name":"readable"}},"property":{"type":"Identifier","start":2659,"end":2665,"name":"pipeTo"}},"arguments":[{"type":"MemberExpression","start":2666,"end":2684,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2666,"end":2675,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2666,"end":2670},"property":{"type":"Identifier","start":2671,"end":2675,"name":"port"}},"property":{"type":"Identifier","start":2676,"end":2684,"name":"writable"}}]}}},{"type":"ExpressionStatement","start":2699,"end":2746,"expression":{"type":"AssignmentExpression","start":2699,"end":2745,"operator":"=","left":{"type":"MemberExpression","start":2699,"end":2710,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2699,"end":2703},"property":{"type":"Identifier","start":2704,"end":2710,"name":"writer"}},"right":{"type":"CallExpression","start":2713,"end":2745,"optional":false,"callee":{"type":"MemberExpression","start":2713,"end":2743,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":2713,"end":2733,"computed":false,"optional":false,"object":{"type":"Identifier","start":2713,"end":2724,"name":"textEncoder"},"property":{"type":"Identifier","start":2725,"end":2733,"name":"writable"}},"property":{"type":"Identifier","start":2734,"end":2743,"name":"getWriter"}},"arguments":[]}}},{"type":"ExpressionStatement","start":2759,"end":2775,"expression":{"type":"CallExpression","start":2759,"end":2774,"optional":false,"callee":{"type":"MemberExpression","start":2759,"end":2772,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2759,"end":2763},"property":{"type":"Identifier","start":2764,"end":2772,"name":"readLoop"}},"arguments":[]}},{"type":"ExpressionStatement","start":2788,"end":2808,"expression":{"type":"CallExpression","start":2788,"end":2807,"optional":false,"callee":{"type":"Identifier","start":2788,"end":2796,"name":"callback"},"arguments":[{"type":"MemberExpression","start":2797,"end":2806,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":2797,"end":2801},"property":{"type":"Identifier","start":2802,"end":2806,"name":"port"}}]}}]},"alternate":{"type":"BlockStatement","start":2832,"end":2922,"body":[{"type":"ExpressionStatement","start":2846,"end":2912,"expression":{"type":"CallExpression","start":2846,"end":2911,"optional":false,"callee":{"type":"MemberExpression","start":2846,"end":2859,"computed":false,"optional":false,"object":{"type":"Identifier","start":2846,"end":2853,"name":"console"},"property":{"type":"Identifier","start":2854,"end":2859,"name":"error"}},"arguments":[{"type":"Literal","start":2860,"end":2910,"value":"This browser does NOT support the Web Serial API","raw":"\"This browser does NOT support the Web Serial API\""}]}}]}}]},"expression":false},"kind":"method"}]}}},{"type":"ClassDeclaration","start":2931,"end":3436,"id":{"type":"Identifier","start":2937,"end":2957,"name":"LineBreakTransformer"},"superClass":null,"body":{"type":"ClassBody","start":2958,"end":3436,"body":[{"type":"PropertyDefinition","start":2964,"end":2979,"static":false,"computed":false,"key":{"type":"Identifier","start":2964,"end":2973,"name":"container"},"value":{"type":"Literal","start":2976,"end":2978,"value":"","raw":"\"\""}},{"type":"PropertyDefinition","start":2984,"end":3001,"static":false,"computed":false,"key":{"type":"Identifier","start":2984,"end":3000,"name":"controlCharacter"},"value":null},{"type":"MethodDefinition","start":3006,"end":3122,"static":false,"computed":false,"key":{"type":"Identifier","start":3006,"end":3017,"name":"constructor"},"value":{"type":"FunctionExpression","start":3017,"end":3122,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":3018,"end":3034,"name":"controlCharacter"}],"body":{"type":"BlockStatement","start":3036,"end":3122,"body":[{"type":"ExpressionStatement","start":3046,"end":3066,"expression":{"type":"AssignmentExpression","start":3046,"end":3065,"operator":"=","left":{"type":"MemberExpression","start":3046,"end":3060,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3046,"end":3050},"property":{"type":"Identifier","start":3051,"end":3060,"name":"container"}},"right":{"type":"Literal","start":3063,"end":3065,"value":"","raw":"''"}}},{"type":"ExpressionStatement","start":3075,"end":3116,"expression":{"type":"AssignmentExpression","start":3075,"end":3115,"operator":"=","left":{"type":"MemberExpression","start":3075,"end":3096,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3075,"end":3079},"property":{"type":"Identifier","start":3080,"end":3096,"name":"controlCharacter"}},"right":{"type":"Identifier","start":3099,"end":3115,"name":"controlCharacter"}}}]},"expression":false},"kind":"constructor"},{"type":"MethodDefinition","start":3127,"end":3360,"static":false,"computed":false,"key":{"type":"Identifier","start":3127,"end":3136,"name":"transform"},"value":{"type":"FunctionExpression","start":3136,"end":3360,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":3137,"end":3142,"name":"chunk"},{"type":"Identifier","start":3144,"end":3154,"name":"controller"}],"body":{"type":"BlockStatement","start":3156,"end":3360,"body":[{"type":"ExpressionStatement","start":3166,"end":3190,"expression":{"type":"AssignmentExpression","start":3166,"end":3189,"operator":"+=","left":{"type":"MemberExpression","start":3166,"end":3180,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3166,"end":3170},"property":{"type":"Identifier","start":3171,"end":3180,"name":"container"}},"right":{"type":"Identifier","start":3184,"end":3189,"name":"chunk"}}},{"type":"VariableDeclaration","start":3199,"end":3257,"kind":"const","declarations":[{"type":"VariableDeclarator","start":3205,"end":3256,"id":{"type":"Identifier","start":3205,"end":3210,"name":"lines"},"init":{"type":"CallExpression","start":3213,"end":3256,"optional":false,"callee":{"type":"MemberExpression","start":3213,"end":3233,"computed":false,"optional":false,"object":{"type":"MemberExpression","start":3213,"end":3227,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3213,"end":3217},"property":{"type":"Identifier","start":3218,"end":3227,"name":"container"}},"property":{"type":"Identifier","start":3228,"end":3233,"name":"split"}},"arguments":[{"type":"MemberExpression","start":3234,"end":3255,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3234,"end":3238},"property":{"type":"Identifier","start":3239,"end":3255,"name":"controlCharacter"}}]}}]},{"type":"ExpressionStatement","start":3266,"end":3295,"expression":{"type":"AssignmentExpression","start":3266,"end":3294,"operator":"=","left":{"type":"MemberExpression","start":3266,"end":3280,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3266,"end":3270},"property":{"type":"Identifier","start":3271,"end":3280,"name":"container"}},"right":{"type":"CallExpression","start":3283,"end":3294,"optional":false,"callee":{"type":"MemberExpression","start":3283,"end":3292,"computed":false,"optional":false,"object":{"type":"Identifier","start":3283,"end":3288,"name":"lines"},"property":{"type":"Identifier","start":3289,"end":3292,"name":"pop"}},"arguments":[]}}},{"type":"ExpressionStatement","start":3304,"end":3354,"expression":{"type":"CallExpression","start":3304,"end":3353,"optional":false,"callee":{"type":"MemberExpression","start":3304,"end":3317,"computed":false,"optional":false,"object":{"type":"Identifier","start":3304,"end":3309,"name":"lines"},"property":{"type":"Identifier","start":3310,"end":3317,"name":"forEach"}},"arguments":[{"type":"ArrowFunctionExpression","start":3318,"end":3352,"async":false,"expression":true,"generator":false,"params":[{"type":"Identifier","start":3319,"end":3323,"name":"line"}],"body":{"type":"CallExpression","start":3328,"end":3352,"optional":false,"callee":{"type":"MemberExpression","start":3328,"end":3346,"computed":false,"optional":false,"object":{"type":"Identifier","start":3328,"end":3338,"name":"controller"},"property":{"type":"Identifier","start":3339,"end":3346,"name":"enqueue"}},"arguments":[{"type":"Identifier","start":3347,"end":3351,"name":"line"}]},"id":null}]}}]},"expression":false},"kind":"method"},{"type":"MethodDefinition","start":3365,"end":3434,"static":false,"computed":false,"key":{"type":"Identifier","start":3365,"end":3370,"name":"flush"},"value":{"type":"FunctionExpression","start":3370,"end":3434,"async":false,"generator":false,"id":null,"params":[{"type":"Identifier","start":3371,"end":3381,"name":"controller"}],"body":{"type":"BlockStatement","start":3383,"end":3434,"body":[{"type":"ExpressionStatement","start":3393,"end":3428,"expression":{"type":"CallExpression","start":3393,"end":3427,"optional":false,"callee":{"type":"MemberExpression","start":3393,"end":3411,"computed":false,"optional":false,"object":{"type":"Identifier","start":3393,"end":3403,"name":"controller"},"property":{"type":"Identifier","start":3404,"end":3411,"name":"enqueue"}},"arguments":[{"type":"MemberExpression","start":3412,"end":3426,"computed":false,"optional":false,"object":{"type":"ThisExpression","start":3412,"end":3416},"property":{"type":"Identifier","start":3417,"end":3426,"name":"container"}}]}}]},"expression":false},"kind":"method"}]}}],"_rollupRemoved":[{"end":13027,"start":3437,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"export class NgxSerial {\n    port;\n    options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default\n    writer;\n    readFunction;\n    controlCharacter = \"\\n\";\n    reader;\n    readableStreamClosed;\n    writableStreamClosed;\n    keepReading = true;\n    constructor(readFunction, options, controlCharacter) {\n        this.readFunction = readFunction;\n        if (options)\n            this.options = options;\n        if (controlCharacter)\n            this.controlCharacter = controlCharacter;\n    }\n    async sendData(data) {\n        await this.writer.write(data);\n    }\n    async readLoop() {\n        while (this.port.readable && this.keepReading) {\n            const textDecoder = new TextDecoderStream();\n            //const readableStream = new ReadableStream();\n            this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);\n            this.reader = textDecoder.readable\n                //.pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))\n                .getReader();\n            try {\n                while (true) {\n                    const { value, done } = await this.reader.read();\n                    if (done) {\n                        break;\n                    }\n                    if (value) {\n                        this.readFunction(value);\n                    }\n                }\n            }\n            catch (error) {\n                console.error(\"Read Loop error. Have the serial device been disconnected ? \");\n            }\n        }\n    }\n    async close(callback) {\n        this.keepReading = false;\n        this.reader.cancel();\n        await this.readableStreamClosed.catch(() => { });\n        this.writer.close();\n        await this.writableStreamClosed;\n        await this.port.close();\n        callback(null);\n    }\n    async connect(callback) {\n        this.keepReading = true;\n        if (\"serial\" in navigator) {\n            // The Web Serial API is supported by the browser.\n            let nav = navigator;\n            const ports = await nav.serial.getPorts();\n            try {\n                this.port = await nav.serial.requestPort();\n            }\n            catch (error) {\n                console.error(\"Requesting port error: \" + error);\n                return;\n            }\n            try {\n                await this.port.open(this.options);\n            }\n            catch (error) {\n                console.error(\"Opening port error: \" + error);\n                return;\n            }\n            const textEncoder = new TextEncoderStream();\n            this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);\n            this.writer = textEncoder.writable.getWriter();\n            this.readLoop();\n            callback(this.port);\n        }\n        else {\n            console.error(\"This browser does NOT support the Web Serial API\");\n        }\n    }\n}\nclass LineBreakTransformer {\n    container = \"\";\n    controlCharacter;\n    constructor(controlCharacter) {\n        this.container = '';\n        this.controlCharacter = controlCharacter;\n    }\n    transform(chunk, controller) {\n        this.container += chunk;\n        const lines = this.container.split(this.controlCharacter);\n        this.container = lines.pop();\n        lines.forEach((line) => controller.enqueue(line));\n    }\n    flush(controller) {\n        controller.enqueue(this.container);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL2xpYi9uZ3gtc2VyaWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxTQUFTO0lBRVYsSUFBSSxDQUFNO0lBQ1YsT0FBTyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxTQUFTO0lBQzFHLE1BQU0sQ0FBTTtJQUNaLFlBQVksQ0FBVztJQUN2QixnQkFBZ0IsR0FBVyxJQUFJLENBQUM7SUFDaEMsTUFBTSxDQUFLO0lBQ1gsb0JBQW9CLENBQUs7SUFDekIsb0JBQW9CLENBQUs7SUFDekIsV0FBVyxHQUFXLElBQUksQ0FBQztJQUVuQyxZQUFZLFlBQXNCLEVBQUUsT0FBYSxFQUFFLGdCQUFzQjtRQUN2RSxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLE9BQU87WUFDVCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixJQUFJLGdCQUFnQjtZQUNsQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7SUFFN0MsQ0FBQztJQUNNLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUNoQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBUTtRQUdwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUcsQ0FBQztZQUMvQyxNQUFNLFdBQVcsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDNUMsOENBQThDO1lBQzlDLElBQUksQ0FBQyxv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O0lBRUgsQ0FBQztDQUNGO0FBRUQsTUFBTSxvQkFBb0I7SUFDeEIsU0FBUyxHQUFNLEVBQUUsQ0FBQztJQUNWLGdCQUFnQixDQUFTO0lBRWpDLFlBQVksZ0JBQXdCO1FBQ2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQTtJQUMxQyxDQUFDO0lBRUQsU0FBUyxDQUFDLEtBQVMsRUFBRSxVQUFjO1FBQ2pDLElBQUksQ0FBQyxTQUFTLElBQUksS0FBSyxDQUFDO1FBQ3hCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzdCLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsS0FBSyxDQUFDLFVBQWM7UUFDbEIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckMsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ORV9UWVBFIH0gZnJvbSBcIkBhbmd1bGFyL2NvbXBpbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTmd4U2VyaWFsIHtcclxuXHJcbiAgICBwcml2YXRlIHBvcnQ6IGFueTtcclxuICAgIHByaXZhdGUgb3B0aW9ucyA9IHsgYmF1ZFJhdGU6IDk2MDAsIGRhdGFCaXRzOiA4LCBwYXJpdHk6ICdub25lJywgYnVmZmVyU2l6ZTogMjU2LCBmbG93Q29udHJvbDogJ25vbmUnIH07IC8vRGVmYXVsdFxyXG4gICAgcHJpdmF0ZSB3cml0ZXI6IGFueTtcclxuICAgIHByaXZhdGUgcmVhZEZ1bmN0aW9uOiBGdW5jdGlvbjtcclxuICAgIHByaXZhdGUgY29udHJvbENoYXJhY3Rlcjogc3RyaW5nID0gXCJcXG5cIjtcclxuICAgIHByaXZhdGUgcmVhZGVyOmFueTtcclxuICAgIHByaXZhdGUgcmVhZGFibGVTdHJlYW1DbG9zZWQ6YW55O1xyXG4gICAgcHJpdmF0ZSB3cml0YWJsZVN0cmVhbUNsb3NlZDphbnk7XHJcbiAgICBwcml2YXRlIGtlZXBSZWFkaW5nOmJvb2xlYW4gPSB0cnVlO1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IocmVhZEZ1bmN0aW9uOiBGdW5jdGlvbiwgb3B0aW9ucz86IGFueSwgY29udHJvbENoYXJhY3Rlcj86IGFueSkge1xyXG4gICAgICB0aGlzLnJlYWRGdW5jdGlvbiA9IHJlYWRGdW5jdGlvbjtcclxuICAgICAgaWYgKG9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgaWYgKGNvbnRyb2xDaGFyYWN0ZXIpXHJcbiAgICAgICAgdGhpcy5jb250cm9sQ2hhcmFjdGVyID0gY29udHJvbENoYXJhY3RlcjtcclxuICBcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzZW5kRGF0YShkYXRhOiBzdHJpbmcpIHtcclxuICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUoZGF0YSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlYWRMb29wKCkge1xyXG4gICAgICBcclxuICBcclxuICAgICAgd2hpbGUgKHRoaXMucG9ydC5yZWFkYWJsZSAmJiB0aGlzLmtlZXBSZWFkaW5nICkge1xyXG4gICAgICAgIGNvbnN0IHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyU3RyZWFtKCk7XHJcbiAgICAgICAgLy9jb25zdCByZWFkYWJsZVN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSgpO1xyXG4gICAgICAgIHRoaXMucmVhZGFibGVTdHJlYW1DbG9zZWQgPSB0aGlzLnBvcnQucmVhZGFibGUucGlwZVRvKHRleHREZWNvZGVyLndyaXRhYmxlKTtcclxuICAgICAgICB0aGlzLnJlYWRlciA9IHRleHREZWNvZGVyLnJlYWRhYmxlXHJcbiAgICAgICAgICAvLy5waXBlVGhyb3VnaChuZXcgVHJhbnNmb3JtU3RyZWFtKG5ldyBMaW5lQnJlYWtUcmFuc2Zvcm1lcih0aGlzLmNvbnRyb2xDaGFyYWN0ZXIpKSlcclxuICAgICAgICAgIC5nZXRSZWFkZXIoKTtcclxuICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xyXG4gICAgICAgICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucmVhZEZ1bmN0aW9uKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVhZCBMb29wIGVycm9yLiBIYXZlIHRoZSBzZXJpYWwgZGV2aWNlIGJlZW4gZGlzY29ubmVjdGVkID8gXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGNsb3NlKGNhbGxiYWNrOkZ1bmN0aW9uKSB7XHJcbiAgICAgIHRoaXMua2VlcFJlYWRpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5yZWFkZXIuY2FuY2VsKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMucmVhZGFibGVTdHJlYW1DbG9zZWQuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgICB0aGlzLndyaXRlci5jbG9zZSgpO1xyXG4gICAgICBhd2FpdCB0aGlzLndyaXRhYmxlU3RyZWFtQ2xvc2VkO1xyXG4gICAgICBhd2FpdCB0aGlzLnBvcnQuY2xvc2UoKTtcclxuICAgICAgY2FsbGJhY2sobnVsbCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwdWJsaWMgYXN5bmMgY29ubmVjdChjYWxsYmFjazpGdW5jdGlvbikge1xyXG4gICAgICB0aGlzLmtlZXBSZWFkaW5nID0gdHJ1ZTtcclxuICAgICAgaWYgKFwic2VyaWFsXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgLy8gVGhlIFdlYiBTZXJpYWwgQVBJIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cclxuICAgICAgICBsZXQgbmF2OiBhbnkgPSBuYXZpZ2F0b3I7XHJcbiAgICAgICAgY29uc3QgcG9ydHMgPSBhd2FpdCBuYXYuc2VyaWFsLmdldFBvcnRzKCk7XHJcbiAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHRoaXMucG9ydCA9IGF3YWl0IG5hdi5zZXJpYWwucmVxdWVzdFBvcnQoKTtcclxuICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlcXVlc3RpbmcgcG9ydCBlcnJvcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgIGF3YWl0IHRoaXMucG9ydC5vcGVuKHRoaXMub3B0aW9ucyk7XHJcbiAgXHJcbiAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJPcGVuaW5nIHBvcnQgZXJyb3I6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlclN0cmVhbSgpO1xyXG4gICAgICAgIHRoaXMud3JpdGFibGVTdHJlYW1DbG9zZWQgPSB0ZXh0RW5jb2Rlci5yZWFkYWJsZS5waXBlVG8odGhpcy5wb3J0LndyaXRhYmxlKTtcclxuICAgICAgICB0aGlzLndyaXRlciA9IHRleHRFbmNvZGVyLndyaXRhYmxlLmdldFdyaXRlcigpO1xyXG4gIFxyXG4gICAgICAgIHRoaXMucmVhZExvb3AoKTtcclxuICBcclxuICAgICAgICBjYWxsYmFjayh0aGlzLnBvcnQpO1xyXG4gIFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGlzIGJyb3dzZXIgZG9lcyBOT1Qgc3VwcG9ydCB0aGUgV2ViIFNlcmlhbCBBUElcIik7XHJcbiAgICAgIH1cclxuICBcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgY2xhc3MgTGluZUJyZWFrVHJhbnNmb3JtZXIge1xyXG4gICAgY29udGFpbmVyOiBhbnk9XCJcIjtcclxuICAgIHByaXZhdGUgY29udHJvbENoYXJhY3Rlcjogc3RyaW5nO1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IoY29udHJvbENoYXJhY3Rlcjogc3RyaW5nKSB7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyID0gJyc7XHJcbiAgICAgIHRoaXMuY29udHJvbENoYXJhY3RlciA9IGNvbnRyb2xDaGFyYWN0ZXJcclxuICAgIH1cclxuICBcclxuICAgIHRyYW5zZm9ybShjaHVuazphbnksIGNvbnRyb2xsZXI6YW55KSB7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyICs9IGNodW5rO1xyXG4gICAgICBjb25zdCBsaW5lcyA9IHRoaXMuY29udGFpbmVyLnNwbGl0KHRoaXMuY29udHJvbENoYXJhY3Rlcik7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyID0gbGluZXMucG9wKCk7XHJcbiAgICAgIGxpbmVzLmZvckVhY2goKGxpbmU6IGFueSkgPT4gY29udHJvbGxlci5lbnF1ZXVlKGxpbmUpKTtcclxuICAgIH1cclxuICBcclxuICAgIGZsdXNoKGNvbnRyb2xsZXI6YW55KSB7XHJcbiAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0aGlzLmNvbnRhaW5lcik7XHJcbiAgICB9XHJcbiAgfSJdfQ==","customTransformCache":false,"dependencies":[],"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\lib\\ngx-serial.mjs","meta":{},"moduleSideEffects":true,"originalCode":"export class NgxSerial {\n    port;\n    options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default\n    writer;\n    readFunction;\n    controlCharacter = \"\\n\";\n    reader;\n    readableStreamClosed;\n    writableStreamClosed;\n    keepReading = true;\n    constructor(readFunction, options, controlCharacter) {\n        this.readFunction = readFunction;\n        if (options)\n            this.options = options;\n        if (controlCharacter)\n            this.controlCharacter = controlCharacter;\n    }\n    async sendData(data) {\n        await this.writer.write(data);\n    }\n    async readLoop() {\n        while (this.port.readable && this.keepReading) {\n            const textDecoder = new TextDecoderStream();\n            //const readableStream = new ReadableStream();\n            this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);\n            this.reader = textDecoder.readable\n                //.pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))\n                .getReader();\n            try {\n                while (true) {\n                    const { value, done } = await this.reader.read();\n                    if (done) {\n                        break;\n                    }\n                    if (value) {\n                        this.readFunction(value);\n                    }\n                }\n            }\n            catch (error) {\n                console.error(\"Read Loop error. Have the serial device been disconnected ? \");\n            }\n        }\n    }\n    async close(callback) {\n        this.keepReading = false;\n        this.reader.cancel();\n        await this.readableStreamClosed.catch(() => { });\n        this.writer.close();\n        await this.writableStreamClosed;\n        await this.port.close();\n        callback(null);\n    }\n    async connect(callback) {\n        this.keepReading = true;\n        if (\"serial\" in navigator) {\n            // The Web Serial API is supported by the browser.\n            let nav = navigator;\n            const ports = await nav.serial.getPorts();\n            try {\n                this.port = await nav.serial.requestPort();\n            }\n            catch (error) {\n                console.error(\"Requesting port error: \" + error);\n                return;\n            }\n            try {\n                await this.port.open(this.options);\n            }\n            catch (error) {\n                console.error(\"Opening port error: \" + error);\n                return;\n            }\n            const textEncoder = new TextEncoderStream();\n            this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);\n            this.writer = textEncoder.writable.getWriter();\n            this.readLoop();\n            callback(this.port);\n        }\n        else {\n            console.error(\"This browser does NOT support the Web Serial API\");\n        }\n    }\n}\nclass LineBreakTransformer {\n    container = \"\";\n    controlCharacter;\n    constructor(controlCharacter) {\n        this.container = '';\n        this.controlCharacter = controlCharacter;\n    }\n    transform(chunk, controller) {\n        this.container += chunk;\n        const lines = this.container.split(this.controlCharacter);\n        this.container = lines.pop();\n        lines.forEach((line) => controller.enqueue(line));\n    }\n    flush(controller) {\n        controller.enqueue(this.container);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL2xpYi9uZ3gtc2VyaWFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTyxTQUFTO0lBRVYsSUFBSSxDQUFNO0lBQ1YsT0FBTyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxTQUFTO0lBQzFHLE1BQU0sQ0FBTTtJQUNaLFlBQVksQ0FBVztJQUN2QixnQkFBZ0IsR0FBVyxJQUFJLENBQUM7SUFDaEMsTUFBTSxDQUFLO0lBQ1gsb0JBQW9CLENBQUs7SUFDekIsb0JBQW9CLENBQUs7SUFDekIsV0FBVyxHQUFXLElBQUksQ0FBQztJQUVuQyxZQUFZLFlBQXNCLEVBQUUsT0FBYSxFQUFFLGdCQUFzQjtRQUN2RSxJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQztRQUNqQyxJQUFJLE9BQU87WUFDVCxJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztRQUN6QixJQUFJLGdCQUFnQjtZQUNsQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLENBQUM7SUFFN0MsQ0FBQztJQUNNLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBWTtRQUNoQyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFTyxLQUFLLENBQUMsUUFBUTtRQUdwQixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUcsQ0FBQztZQUMvQyxNQUFNLFdBQVcsR0FBRyxJQUFJLGlCQUFpQixFQUFFLENBQUM7WUFDNUMsOENBQThDO1lBQzlDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVFLElBQUksQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDLFFBQVE7Z0JBQ2hDLG9GQUFvRjtpQkFDbkYsU0FBUyxFQUFFLENBQUM7WUFFZixJQUFJLENBQUM7Z0JBQ0gsT0FBTyxJQUFJLEVBQUUsQ0FBQztvQkFDWixNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxHQUFHLE1BQU0sSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDakQsSUFBSSxJQUFJLEVBQUUsQ0FBQzt3QkFDVCxNQUFNO29CQUNSLENBQUM7b0JBQ0QsSUFBSSxLQUFLLEVBQUUsQ0FBQzt3QkFDVixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUMzQixDQUFDO2dCQUNILENBQUM7WUFDSCxDQUFDO1lBQUMsT0FBTyxLQUFLLEVBQUUsQ0FBQztnQkFDZixPQUFPLENBQUMsS0FBSyxDQUFDLDhEQUE4RCxDQUFDLENBQUM7WUFDaEYsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBQ00sS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFpQjtRQUNsQyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUN6QixJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ3JCLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixDQUFDLEtBQUssQ0FBQyxHQUFHLEVBQUUsR0FBRSxDQUFDLENBQUMsQ0FBQztRQUNoRCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ3BCLE1BQU0sSUFBSSxDQUFDLG9CQUFvQixDQUFDO1FBQ2hDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN4QixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakIsQ0FBQztJQUVNLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBaUI7UUFDcEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7UUFDeEIsSUFBSSxRQUFRLElBQUksU0FBUyxFQUFFLENBQUM7WUFDMUIsa0RBQWtEO1lBQ2xELElBQUksR0FBRyxHQUFRLFNBQVMsQ0FBQztZQUN6QixNQUFNLEtBQUssR0FBRyxNQUFNLEdBQUcsQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7WUFFMUMsSUFBSSxDQUFDO2dCQUNILElBQUksQ0FBQyxJQUFJLEdBQUcsTUFBTSxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO1lBRTdDLENBQUM7WUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO2dCQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMseUJBQXlCLEdBQUcsS0FBSyxDQUFDLENBQUM7Z0JBQ2pELE9BQU87WUFDVCxDQUFDO1lBRUQsSUFBSSxDQUFDO2dCQUNKLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBR3BDLENBQUM7WUFBQyxPQUFPLEtBQUssRUFBRSxDQUFDO2dCQUNmLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDLENBQUM7Z0JBQzlDLE9BQU87WUFDVCxDQUFDO1lBRUQsTUFBTSxXQUFXLEdBQUcsSUFBSSxpQkFBaUIsRUFBRSxDQUFDO1lBQzVDLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxXQUFXLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzVFLElBQUksQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFDLFFBQVEsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUUvQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7WUFFaEIsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUV0QixDQUFDO2FBQU0sQ0FBQztZQUNOLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0RBQWtELENBQUMsQ0FBQztRQUNwRSxDQUFDO0lBRUgsQ0FBQztDQUNGO0FBRUQsTUFBTSxvQkFBb0I7SUFDeEIsU0FBUyxHQUFNLEVBQUUsQ0FBQztJQUNWLGdCQUFnQixDQUFTO0lBRWpDLFlBQVksZ0JBQXdCO1FBQ2xDLElBQUksQ0FBQyxTQUFTLEdBQUcsRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsQ0FBQTtJQUMxQyxDQUFDO0lBRUQsU0FBUyxDQUFDLEtBQVMsRUFBRSxVQUFjO1FBQ2pDLElBQUksQ0FBQyxTQUFTLElBQUksS0FBSyxDQUFDO1FBQ3hCLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzFELElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzdCLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFTLEVBQUUsRUFBRSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRUQsS0FBSyxDQUFDLFVBQWM7UUFDbEIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDckMsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTk9ORV9UWVBFIH0gZnJvbSBcIkBhbmd1bGFyL2NvbXBpbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTmd4U2VyaWFsIHtcclxuXHJcbiAgICBwcml2YXRlIHBvcnQ6IGFueTtcclxuICAgIHByaXZhdGUgb3B0aW9ucyA9IHsgYmF1ZFJhdGU6IDk2MDAsIGRhdGFCaXRzOiA4LCBwYXJpdHk6ICdub25lJywgYnVmZmVyU2l6ZTogMjU2LCBmbG93Q29udHJvbDogJ25vbmUnIH07IC8vRGVmYXVsdFxyXG4gICAgcHJpdmF0ZSB3cml0ZXI6IGFueTtcclxuICAgIHByaXZhdGUgcmVhZEZ1bmN0aW9uOiBGdW5jdGlvbjtcclxuICAgIHByaXZhdGUgY29udHJvbENoYXJhY3Rlcjogc3RyaW5nID0gXCJcXG5cIjtcclxuICAgIHByaXZhdGUgcmVhZGVyOmFueTtcclxuICAgIHByaXZhdGUgcmVhZGFibGVTdHJlYW1DbG9zZWQ6YW55O1xyXG4gICAgcHJpdmF0ZSB3cml0YWJsZVN0cmVhbUNsb3NlZDphbnk7XHJcbiAgICBwcml2YXRlIGtlZXBSZWFkaW5nOmJvb2xlYW4gPSB0cnVlO1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IocmVhZEZ1bmN0aW9uOiBGdW5jdGlvbiwgb3B0aW9ucz86IGFueSwgY29udHJvbENoYXJhY3Rlcj86IGFueSkge1xyXG4gICAgICB0aGlzLnJlYWRGdW5jdGlvbiA9IHJlYWRGdW5jdGlvbjtcclxuICAgICAgaWYgKG9wdGlvbnMpXHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgaWYgKGNvbnRyb2xDaGFyYWN0ZXIpXHJcbiAgICAgICAgdGhpcy5jb250cm9sQ2hhcmFjdGVyID0gY29udHJvbENoYXJhY3RlcjtcclxuICBcclxuICAgIH1cclxuICAgIHB1YmxpYyBhc3luYyBzZW5kRGF0YShkYXRhOiBzdHJpbmcpIHtcclxuICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUoZGF0YSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlYWRMb29wKCkge1xyXG4gICAgICBcclxuICBcclxuICAgICAgd2hpbGUgKHRoaXMucG9ydC5yZWFkYWJsZSAmJiB0aGlzLmtlZXBSZWFkaW5nICkge1xyXG4gICAgICAgIGNvbnN0IHRleHREZWNvZGVyID0gbmV3IFRleHREZWNvZGVyU3RyZWFtKCk7XHJcbiAgICAgICAgLy9jb25zdCByZWFkYWJsZVN0cmVhbSA9IG5ldyBSZWFkYWJsZVN0cmVhbSgpO1xyXG4gICAgICAgIHRoaXMucmVhZGFibGVTdHJlYW1DbG9zZWQgPSB0aGlzLnBvcnQucmVhZGFibGUucGlwZVRvKHRleHREZWNvZGVyLndyaXRhYmxlKTtcclxuICAgICAgICB0aGlzLnJlYWRlciA9IHRleHREZWNvZGVyLnJlYWRhYmxlXHJcbiAgICAgICAgICAvLy5waXBlVGhyb3VnaChuZXcgVHJhbnNmb3JtU3RyZWFtKG5ldyBMaW5lQnJlYWtUcmFuc2Zvcm1lcih0aGlzLmNvbnRyb2xDaGFyYWN0ZXIpKSlcclxuICAgICAgICAgIC5nZXRSZWFkZXIoKTtcclxuICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgdGhpcy5yZWFkZXIucmVhZCgpO1xyXG4gICAgICAgICAgICBpZiAoZG9uZSkge1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgIHRoaXMucmVhZEZ1bmN0aW9uKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUmVhZCBMb29wIGVycm9yLiBIYXZlIHRoZSBzZXJpYWwgZGV2aWNlIGJlZW4gZGlzY29ubmVjdGVkID8gXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGFzeW5jIGNsb3NlKGNhbGxiYWNrOkZ1bmN0aW9uKSB7XHJcbiAgICAgIHRoaXMua2VlcFJlYWRpbmcgPSBmYWxzZTtcclxuICAgICAgdGhpcy5yZWFkZXIuY2FuY2VsKCk7XHJcbiAgICAgIGF3YWl0IHRoaXMucmVhZGFibGVTdHJlYW1DbG9zZWQuY2F0Y2goKCkgPT4ge30pO1xyXG4gICAgICB0aGlzLndyaXRlci5jbG9zZSgpO1xyXG4gICAgICBhd2FpdCB0aGlzLndyaXRhYmxlU3RyZWFtQ2xvc2VkO1xyXG4gICAgICBhd2FpdCB0aGlzLnBvcnQuY2xvc2UoKTtcclxuICAgICAgY2FsbGJhY2sobnVsbCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBwdWJsaWMgYXN5bmMgY29ubmVjdChjYWxsYmFjazpGdW5jdGlvbikge1xyXG4gICAgICB0aGlzLmtlZXBSZWFkaW5nID0gdHJ1ZTtcclxuICAgICAgaWYgKFwic2VyaWFsXCIgaW4gbmF2aWdhdG9yKSB7XHJcbiAgICAgICAgLy8gVGhlIFdlYiBTZXJpYWwgQVBJIGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3Nlci5cclxuICAgICAgICBsZXQgbmF2OiBhbnkgPSBuYXZpZ2F0b3I7XHJcbiAgICAgICAgY29uc3QgcG9ydHMgPSBhd2FpdCBuYXYuc2VyaWFsLmdldFBvcnRzKCk7XHJcbiAgXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHRoaXMucG9ydCA9IGF3YWl0IG5hdi5zZXJpYWwucmVxdWVzdFBvcnQoKTtcclxuICBcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIlJlcXVlc3RpbmcgcG9ydCBlcnJvcjogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gIFxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgIGF3YWl0IHRoaXMucG9ydC5vcGVuKHRoaXMub3B0aW9ucyk7XHJcbiAgXHJcbiAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJPcGVuaW5nIHBvcnQgZXJyb3I6IFwiICsgZXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlclN0cmVhbSgpO1xyXG4gICAgICAgIHRoaXMud3JpdGFibGVTdHJlYW1DbG9zZWQgPSB0ZXh0RW5jb2Rlci5yZWFkYWJsZS5waXBlVG8odGhpcy5wb3J0LndyaXRhYmxlKTtcclxuICAgICAgICB0aGlzLndyaXRlciA9IHRleHRFbmNvZGVyLndyaXRhYmxlLmdldFdyaXRlcigpO1xyXG4gIFxyXG4gICAgICAgIHRoaXMucmVhZExvb3AoKTtcclxuICBcclxuICAgICAgICBjYWxsYmFjayh0aGlzLnBvcnQpO1xyXG4gIFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJUaGlzIGJyb3dzZXIgZG9lcyBOT1Qgc3VwcG9ydCB0aGUgV2ViIFNlcmlhbCBBUElcIik7XHJcbiAgICAgIH1cclxuICBcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgY2xhc3MgTGluZUJyZWFrVHJhbnNmb3JtZXIge1xyXG4gICAgY29udGFpbmVyOiBhbnk9XCJcIjtcclxuICAgIHByaXZhdGUgY29udHJvbENoYXJhY3Rlcjogc3RyaW5nO1xyXG4gIFxyXG4gICAgY29uc3RydWN0b3IoY29udHJvbENoYXJhY3Rlcjogc3RyaW5nKSB7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyID0gJyc7XHJcbiAgICAgIHRoaXMuY29udHJvbENoYXJhY3RlciA9IGNvbnRyb2xDaGFyYWN0ZXJcclxuICAgIH1cclxuICBcclxuICAgIHRyYW5zZm9ybShjaHVuazphbnksIGNvbnRyb2xsZXI6YW55KSB7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyICs9IGNodW5rO1xyXG4gICAgICBjb25zdCBsaW5lcyA9IHRoaXMuY29udGFpbmVyLnNwbGl0KHRoaXMuY29udHJvbENoYXJhY3Rlcik7XHJcbiAgICAgIHRoaXMuY29udGFpbmVyID0gbGluZXMucG9wKCk7XHJcbiAgICAgIGxpbmVzLmZvckVhY2goKGxpbmU6IGFueSkgPT4gY29udHJvbGxlci5lbnF1ZXVlKGxpbmUpKTtcclxuICAgIH1cclxuICBcclxuICAgIGZsdXNoKGNvbnRyb2xsZXI6YW55KSB7XHJcbiAgICAgIGNvbnRyb2xsZXIuZW5xdWV1ZSh0aGlzLmNvbnRhaW5lcik7XHJcbiAgICB9XHJcbiAgfSJdfQ==","originalSourcemap":{"version":3,"file":"ngx-serial.js","sourceRoot":"","sources":["../../../../projects/ngx-serial/src/lib/ngx-serial.ts"],"names":[],"mappings":[[[0,0,2,0],[6,0,2,6],[13,0,2,13],[22,0,2,22]],[[4,0,4,12],[8,0,4,16],[9,0,4,22]],[[4,0,5,12],[11,0,5,19],[14,0,5,22],[16,0,5,24],[24,0,5,32],[26,0,5,34],[30,0,5,38],[32,0,5,40],[40,0,5,48],[42,0,5,50],[43,0,5,51],[45,0,5,53],[51,0,5,59],[53,0,5,61],[59,0,5,67],[61,0,5,69],[71,0,5,79],[73,0,5,81],[76,0,5,84],[78,0,5,86],[89,0,5,97],[91,0,5,99],[97,0,5,105],[99,0,5,107],[100,0,5,108],[101,0,5,109],[110,0,5,118]],[[4,0,6,12],[10,0,6,18],[11,0,6,24]],[[4,0,7,12],[16,0,7,24],[17,0,7,35]],[[4,0,8,12],[20,0,8,28],[23,0,8,39],[27,0,8,43],[28,0,8,44]],[[4,0,9,12],[10,0,9,18],[11,0,9,23]],[[4,0,10,12],[24,0,10,32],[25,0,10,37]],[[4,0,11,12],[24,0,11,32],[25,0,11,37]],[[4,0,12,12],[15,0,12,23],[18,0,12,34],[22,0,12,38],[23,0,12,39]],[[4,0,14,4],[16,0,14,16],[28,0,14,38],[30,0,14,40],[37,0,14,53],[39,0,14,55],[55,0,14,77]],[[8,0,15,6],[12,0,15,10],[13,0,15,11],[25,0,15,23],[28,0,15,26],[40,0,15,38],[41,0,15,39]],[[8,0,16,6],[12,0,16,10],[19,0,16,17]],[[12,0,17,8],[16,0,17,12],[17,0,17,13],[24,0,17,20],[27,0,17,23],[34,0,17,30],[35,0,17,31]],[[8,0,18,6],[12,0,18,10],[28,0,18,26]],[[12,0,19,8],[16,0,19,12],[17,0,19,13],[33,0,19,29],[36,0,19,32],[52,0,19,48],[53,0,19,49]],[[4,0,21,4],[5,0,21,5]],[[4,0,22,11],[9,0,22,16],[10,0,22,17],[18,0,22,25],[19,0,22,26],[23,0,22,38]],[[8,0,23,6],[14,0,23,12],[18,0,23,16],[19,0,23,17],[25,0,23,23],[26,0,23,24],[31,0,23,29],[32,0,23,30],[36,0,23,34],[37,0,23,35],[38,0,23,36]],[[4,0,24,4],[5,0,24,5]],[[4,0,26,12],[9,0,26,17],[10,0,26,18],[18,0,26,26]],[[8,0,29,6],[15,0,29,13],[19,0,29,17],[20,0,29,18],[24,0,29,22],[25,0,29,23],[33,0,29,31],[37,0,29,35],[41,0,29,39],[42,0,29,40],[53,0,29,51],[55,0,29,54],[56,0,29,55]],[[12,0,30,8],[18,0,30,14],[29,0,30,25],[32,0,30,28],[36,0,30,32],[53,0,30,49],[55,0,30,51],[56,0,30,52]],[[12,0,31,8],[58,0,31,54]],[[12,0,32,8],[16,0,32,12],[17,0,32,13],[37,0,32,33],[40,0,32,36],[44,0,32,40],[45,0,32,41],[49,0,32,45],[50,0,32,46],[58,0,32,54],[59,0,32,55],[65,0,32,61],[66,0,32,62],[77,0,32,73],[78,0,32,74],[86,0,32,82],[87,0,32,83],[88,0,32,84]],[[12,0,33,8],[16,0,33,12],[17,0,33,13],[23,0,33,19],[26,0,33,22],[37,0,33,33],[38,0,33,34],[46,0,33,42]],[[16,0,34,10],[100,0,34,94]],[[17,0,35,11],[26,0,35,20],[28,0,35,22],[29,0,35,23]],[[12,0,37,8],[16,0,37,12],[17,0,37,13]],[[16,0,38,10],[23,0,38,17],[27,0,38,21],[29,0,38,23],[30,0,38,24]],[[20,0,39,12],[26,0,39,18],[28,0,39,20],[33,0,39,25],[35,0,39,27],[39,0,39,31],[41,0,39,33],[44,0,39,36],[50,0,39,42],[54,0,39,46],[55,0,39,47],[61,0,39,53],[62,0,39,54],[66,0,39,58],[68,0,39,60],[69,0,39,61]],[[20,0,40,12],[24,0,40,16],[28,0,40,20],[30,0,40,22],[31,0,40,23]],[[24,0,41,14],[30,0,41,20]],[[20,0,42,12],[21,0,42,13]],[[20,0,43,12],[24,0,43,16],[29,0,43,21],[31,0,43,23],[32,0,43,24]],[[24,0,44,14],[28,0,44,18],[29,0,44,19],[41,0,44,31],[42,0,44,32],[47,0,44,37],[48,0,44,38],[49,0,44,39]],[[20,0,45,12],[21,0,45,13]],[[16,0,46,10],[17,0,46,11]],[[12,0,47,8],[13,0,47,9]],[[12,0,47,10],[19,0,47,17],[24,0,47,22],[26,0,47,24],[27,0,47,25]],[[16,0,48,10],[23,0,48,17],[24,0,48,18],[29,0,48,23],[30,0,48,24],[92,0,48,86],[93,0,48,87],[94,0,48,88]],[[12,0,49,8],[13,0,49,9]],[[8,0,50,6],[9,0,50,7]],[[4,0,51,4],[5,0,51,5]],[[4,0,52,11],[9,0,52,16],[10,0,52,17],[15,0,52,22],[16,0,52,23],[24,0,52,40]],[[8,0,53,6],[12,0,53,10],[13,0,53,11],[24,0,53,22],[27,0,53,25],[32,0,53,30],[33,0,53,31]],[[8,0,54,6],[12,0,54,10],[13,0,54,11],[19,0,54,17],[20,0,54,18],[26,0,54,24],[28,0,54,26],[29,0,54,27]],[[8,0,55,6],[14,0,55,12],[18,0,55,16],[19,0,55,17],[39,0,55,37],[40,0,55,38],[45,0,55,43],[46,0,55,44],[49,0,55,47],[51,0,55,49],[54,0,55,51],[55,0,55,52],[56,0,55,53],[57,0,55,54]],[[8,0,56,6],[12,0,56,10],[13,0,56,11],[19,0,56,17],[20,0,56,18],[25,0,56,23],[27,0,56,25],[28,0,56,26]],[[8,0,57,6],[14,0,57,12],[18,0,57,16],[19,0,57,17],[39,0,57,37],[40,0,57,38]],[[8,0,58,6],[14,0,58,12],[18,0,58,16],[19,0,58,17],[23,0,58,21],[24,0,58,22],[29,0,58,27],[31,0,58,29],[32,0,58,30]],[[8,0,59,6],[16,0,59,14],[17,0,59,15],[21,0,59,19],[22,0,59,20],[23,0,59,21]],[[4,0,60,4],[5,0,60,5]],[[4,0,62,11],[9,0,62,16],[10,0,62,17],[17,0,62,24],[18,0,62,25],[26,0,62,42]],[[8,0,63,6],[12,0,63,10],[13,0,63,11],[24,0,63,22],[27,0,63,25],[31,0,63,29],[32,0,63,30]],[[8,0,64,6],[12,0,64,10],[20,0,64,18],[24,0,64,22],[33,0,64,31],[35,0,64,33],[36,0,64,34]],[[12,0,65,8],[62,0,65,58]],[[12,0,66,8],[16,0,66,12],[19,0,66,15],[22,0,66,23],[31,0,66,32],[32,0,66,33]],[[12,0,67,8],[18,0,67,14],[23,0,67,19],[26,0,67,22],[32,0,67,28],[35,0,67,31],[36,0,67,32],[42,0,67,38],[43,0,67,39],[51,0,67,47],[53,0,67,49],[54,0,67,50]],[[12,0,69,8],[16,0,69,12],[17,0,69,13]],[[16,0,70,10],[20,0,70,14],[21,0,70,15],[25,0,70,19],[28,0,70,22],[34,0,70,28],[37,0,70,31],[38,0,70,32],[44,0,70,38],[45,0,70,39],[56,0,70,50],[58,0,70,52],[59,0,70,53]],[[12,0,72,8],[13,0,72,9]],[[12,0,72,10],[19,0,72,17],[24,0,72,22],[26,0,72,24],[27,0,72,25]],[[16,0,73,10],[23,0,73,17],[24,0,73,18],[29,0,73,23],[30,0,73,24],[55,0,73,49],[58,0,73,52],[63,0,73,57],[64,0,73,58],[65,0,73,59]],[[16,0,74,10],[23,0,74,17]],[[12,0,75,8],[13,0,75,9]],[[12,0,77,8],[16,0,77,12],[17,0,77,13]],[[16,0,78,9],[22,0,78,15],[26,0,78,19],[27,0,78,20],[31,0,78,24],[32,0,78,25],[36,0,78,29],[37,0,78,30],[41,0,78,34],[42,0,78,35],[49,0,78,42],[50,0,78,43],[51,0,78,44]],[[12,0,81,8],[13,0,81,9]],[[12,0,81,10],[19,0,81,17],[24,0,81,22],[26,0,81,24],[27,0,81,25]],[[16,0,82,10],[23,0,82,17],[24,0,82,18],[29,0,82,23],[30,0,82,24],[52,0,82,46],[55,0,82,49],[60,0,82,54],[61,0,82,55],[62,0,82,56]],[[16,0,83,10],[23,0,83,17]],[[12,0,84,8],[13,0,84,9]],[[12,0,86,8],[18,0,86,14],[29,0,86,25],[32,0,86,28],[36,0,86,32],[53,0,86,49],[55,0,86,51],[56,0,86,52]],[[12,0,87,8],[16,0,87,12],[17,0,87,13],[37,0,87,33],[40,0,87,36],[51,0,87,47],[52,0,87,48],[60,0,87,56],[61,0,87,57],[67,0,87,63],[68,0,87,64],[72,0,87,68],[73,0,87,69],[77,0,87,73],[78,0,87,74],[86,0,87,82],[87,0,87,83],[88,0,87,84]],[[12,0,88,8],[16,0,88,12],[17,0,88,13],[23,0,88,19],[26,0,88,22],[37,0,88,33],[38,0,88,34],[46,0,88,42],[47,0,88,43],[56,0,88,52],[58,0,88,54],[59,0,88,55]],[[12,0,90,8],[16,0,90,12],[17,0,90,13],[25,0,90,21],[27,0,90,23],[28,0,90,24]],[[12,0,92,8],[20,0,92,16],[21,0,92,17],[25,0,92,21],[26,0,92,22],[30,0,92,26],[31,0,92,27],[32,0,92,28]],[[8,0,94,6],[9,0,94,7]],[[13,0,94,13],[14,0,94,14]],[[12,0,95,8],[19,0,95,15],[20,0,95,16],[25,0,95,21],[26,0,95,22],[76,0,95,72],[77,0,95,73],[78,0,95,74]],[[8,0,96,6],[9,0,96,7]],[[4,0,98,4],[5,0,98,5]],[[1,0,99,3]],[[0,0,101,2],[6,0,101,8],[26,0,101,28]],[[4,0,102,4],[13,0,102,13],[16,0,102,19],[18,0,102,21],[19,0,102,22]],[[4,0,103,12],[20,0,103,28],[21,0,103,37]],[[4,0,105,4],[16,0,105,16],[32,0,105,40]],[[8,0,106,6],[12,0,106,10],[13,0,106,11],[22,0,106,20],[25,0,106,23],[27,0,106,25],[28,0,106,26]],[[8,0,107,6],[12,0,107,10],[13,0,107,11],[29,0,107,27],[32,0,107,30],[48,0,107,46],[49,0,107,46]],[[4,0,108,4],[5,0,108,5]],[[4,0,110,4],[13,0,110,13],[14,0,110,14],[19,0,110,23],[21,0,110,25],[31,0,110,39]],[[8,0,111,6],[12,0,111,10],[13,0,111,11],[22,0,111,20],[26,0,111,24],[31,0,111,29],[32,0,111,30]],[[8,0,112,6],[14,0,112,12],[19,0,112,17],[22,0,112,20],[26,0,112,24],[27,0,112,25],[36,0,112,34],[37,0,112,35],[42,0,112,40],[43,0,112,41],[47,0,112,45],[48,0,112,46],[64,0,112,62],[65,0,112,63],[66,0,112,64]],[[8,0,113,6],[12,0,113,10],[13,0,113,11],[22,0,113,20],[25,0,113,23],[30,0,113,28],[31,0,113,29],[34,0,113,32],[36,0,113,34],[37,0,113,35]],[[8,0,114,6],[13,0,114,11],[14,0,114,12],[21,0,114,19],[22,0,114,20],[23,0,114,21],[27,0,114,30],[29,0,114,32],[31,0,114,34],[32,0,114,35],[42,0,114,45],[43,0,114,46],[50,0,114,53],[51,0,114,54],[55,0,114,58],[56,0,114,59],[57,0,114,60],[58,0,114,61]],[[4,0,115,4],[5,0,115,5]],[[4,0,117,4],[9,0,117,9],[10,0,117,10],[20,0,117,24]],[[8,0,118,6],[18,0,118,16],[19,0,118,17],[26,0,118,24],[27,0,118,25],[31,0,118,29],[32,0,118,30],[41,0,118,39],[42,0,118,40],[43,0,118,41]],[[4,0,119,4],[5,0,119,5]],[[1,0,120,3]]],"sourcesContent":["import { NONE_TYPE } from \"@angular/compiler\";\r\n\r\nexport class NgxSerial {\r\n\r\n    private port: any;\r\n    private options = { baudRate: 9600, dataBits: 8, parity: 'none', bufferSize: 256, flowControl: 'none' }; //Default\r\n    private writer: any;\r\n    private readFunction: Function;\r\n    private controlCharacter: string = \"\\n\";\r\n    private reader:any;\r\n    private readableStreamClosed:any;\r\n    private writableStreamClosed:any;\r\n    private keepReading:boolean = true;\r\n  \r\n    constructor(readFunction: Function, options?: any, controlCharacter?: any) {\r\n      this.readFunction = readFunction;\r\n      if (options)\r\n        this.options = options;\r\n      if (controlCharacter)\r\n        this.controlCharacter = controlCharacter;\r\n  \r\n    }\r\n    public async sendData(data: string) {\r\n      await this.writer.write(data);\r\n    }\r\n  \r\n    private async readLoop() {\r\n      \r\n  \r\n      while (this.port.readable && this.keepReading ) {\r\n        const textDecoder = new TextDecoderStream();\r\n        //const readableStream = new ReadableStream();\r\n        this.readableStreamClosed = this.port.readable.pipeTo(textDecoder.writable);\r\n        this.reader = textDecoder.readable\r\n          //.pipeThrough(new TransformStream(new LineBreakTransformer(this.controlCharacter)))\r\n          .getReader();\r\n  \r\n        try {\r\n          while (true) {\r\n            const { value, done } = await this.reader.read();\r\n            if (done) {\r\n              break;\r\n            }\r\n            if (value) {\r\n              this.readFunction(value);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Read Loop error. Have the serial device been disconnected ? \");\r\n        }\r\n      }\r\n    }\r\n    public async close(callback:Function) {\r\n      this.keepReading = false;\r\n      this.reader.cancel();\r\n      await this.readableStreamClosed.catch(() => {});\r\n      this.writer.close();\r\n      await this.writableStreamClosed;\r\n      await this.port.close();\r\n      callback(null);\r\n    }\r\n  \r\n    public async connect(callback:Function) {\r\n      this.keepReading = true;\r\n      if (\"serial\" in navigator) {\r\n        // The Web Serial API is supported by the browser.\r\n        let nav: any = navigator;\r\n        const ports = await nav.serial.getPorts();\r\n  \r\n        try {\r\n          this.port = await nav.serial.requestPort();\r\n  \r\n        } catch (error) {\r\n          console.error(\"Requesting port error: \" + error);\r\n          return;\r\n        }\r\n  \r\n        try {\r\n         await this.port.open(this.options);\r\n  \r\n  \r\n        } catch (error) {\r\n          console.error(\"Opening port error: \" + error);\r\n          return;\r\n        }\r\n  \r\n        const textEncoder = new TextEncoderStream();\r\n        this.writableStreamClosed = textEncoder.readable.pipeTo(this.port.writable);\r\n        this.writer = textEncoder.writable.getWriter();\r\n  \r\n        this.readLoop();\r\n  \r\n        callback(this.port);\r\n  \r\n      } else {\r\n        console.error(\"This browser does NOT support the Web Serial API\");\r\n      }\r\n  \r\n    }\r\n  }\r\n  \r\n  class LineBreakTransformer {\r\n    container: any=\"\";\r\n    private controlCharacter: string;\r\n  \r\n    constructor(controlCharacter: string) {\r\n      this.container = '';\r\n      this.controlCharacter = controlCharacter\r\n    }\r\n  \r\n    transform(chunk:any, controller:any) {\r\n      this.container += chunk;\r\n      const lines = this.container.split(this.controlCharacter);\r\n      this.container = lines.pop();\r\n      lines.forEach((line: any) => controller.enqueue(line));\r\n    }\r\n  \r\n    flush(controller:any) {\r\n      controller.enqueue(this.container);\r\n    }\r\n  }"]},"resolvedIds":{},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":846,"body":[{"type":"ExportAllDeclaration","start":174,"end":207,"exported":null,"source":{"type":"Literal","start":188,"end":206,"value":"./lib/ngx-serial","raw":"'./lib/ngx-serial'"},"attributes":[]}],"_rollupRemoved":[{"end":846,"start":208,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"/*\n * Public API Surface of ngx-serial\n */\n/*export * from './lib/ngx-serial.service';\nexport * from './lib/ngx-serial.component';\nexport * from './lib/ngx-serial.module';*/\nexport * from './lib/ngx-serial';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL3B1YmxpYy1hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSDs7MENBRTBDO0FBQzFDLGNBQWMsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2Ygbmd4LXNlcmlhbFxyXG4gKi9cclxuXHJcbi8qZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5zZXJ2aWNlJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5jb21wb25lbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9uZ3gtc2VyaWFsLm1vZHVsZSc7Ki9cclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbCc7XHJcbiJdfQ==","customTransformCache":false,"dependencies":["C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\lib\\ngx-serial.mjs"],"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/*\n * Public API Surface of ngx-serial\n */\n/*export * from './lib/ngx-serial.service';\nexport * from './lib/ngx-serial.component';\nexport * from './lib/ngx-serial.module';*/\nexport * from './lib/ngx-serial';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHVibGljLWFwaS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL3B1YmxpYy1hcGkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSDs7MENBRTBDO0FBQzFDLGNBQWMsa0JBQWtCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBQdWJsaWMgQVBJIFN1cmZhY2Ugb2Ygbmd4LXNlcmlhbFxyXG4gKi9cclxuXHJcbi8qZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5zZXJ2aWNlJztcclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbC5jb21wb25lbnQnO1xyXG5leHBvcnQgKiBmcm9tICcuL2xpYi9uZ3gtc2VyaWFsLm1vZHVsZSc7Ki9cclxuZXhwb3J0ICogZnJvbSAnLi9saWIvbmd4LXNlcmlhbCc7XHJcbiJdfQ==","originalSourcemap":{"version":3,"file":"public-api.js","sourceRoot":"","sources":["../../../projects/ngx-serial/src/public-api.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0]],[],[[42,0,6,42]],[[0,0,7,0],[14,0,7,14],[32,0,7,32],[33,0,7,33]]],"sourcesContent":["/*\r\n * Public API Surface of ngx-serial\r\n */\r\n\r\n/*export * from './lib/ngx-serial.service';\r\nexport * from './lib/ngx-serial.component';\r\nexport * from './lib/ngx-serial.module';*/\r\nexport * from './lib/ngx-serial';\r\n"]},"resolvedIds":{"./lib/ngx-serial":{"attributes":{},"external":false,"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\lib\\ngx-serial.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]},{"ast":{"type":"Program","start":0,"end":496,"body":[{"type":"ExportAllDeclaration","start":48,"end":77,"exported":null,"source":{"type":"Literal","start":62,"end":76,"value":"./public-api","raw":"'./public-api'"},"attributes":[]}],"_rollupRemoved":[{"end":496,"start":78,"type":"sourcemap"}],"sourceType":"module"},"attributes":{},"code":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL25neC1zZXJpYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","customTransformCache":false,"dependencies":["C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\public-api.mjs"],"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\ngx-serial.mjs","meta":{},"moduleSideEffects":true,"originalCode":"/**\n * Generated bundle index. Do not edit.\n */\nexport * from './public-api';\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LXNlcmlhbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3Byb2plY3RzL25neC1zZXJpYWwvc3JjL25neC1zZXJpYWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0dBRUc7QUFFSCxjQUFjLGNBQWMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2VuZXJhdGVkIGJ1bmRsZSBpbmRleC4gRG8gbm90IGVkaXQuXG4gKi9cblxuZXhwb3J0ICogZnJvbSAnLi9wdWJsaWMtYXBpJztcbiJdfQ==","originalSourcemap":{"version":3,"file":"ngx-serial.js","sourceRoot":"","sources":["../../../projects/ngx-serial/src/ngx-serial.ts"],"names":[],"mappings":[[[0,0,0,0]],[],[[3,0,2,3]],[[0,0,4,0],[14,0,4,14],[28,0,4,28],[29,0,4,29]]],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"resolvedIds":{"./public-api":{"attributes":{},"external":false,"id":"C:\\repos\\ngx-serial\\dist\\ngx-serial\\esm2022\\public-api.mjs","meta":{},"moduleSideEffects":true,"resolvedBy":"node-resolve","syntheticNamedExports":false}},"sourcemapChain":[],"syntheticNamedExports":false,"transformDependencies":[]}],"plugins":{"node-resolve":{},"json":{},"file-loader":{}}}